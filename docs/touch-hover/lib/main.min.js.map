{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 02675a4cd9cdf646e2b0","webpack:///./src/index.js","webpack:///external \"js-base\""],"names":["root","factory","exports","module","require","define","amd","self","this","__WEBPACK_EXTERNAL_MODULE_1__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","_jsBase","instances","touchUsed","clicked","document","addEventListener","e","pointerType","forEach","instance","_blur","TouchHover","features","Feature","push","openedByTouch","openedByMouseenter","initialActive","node","classList","contains","options","classActive","_mouseenterListener","_mouseleaveListener","_clickListener","event","createEvent","initCustomEvent","originalEvent","dispatchEvent","utils","check","isFunction","resetOpen","resetOpenOnMouseBlur","type","currentTarget","resetOpenOnClickBlur","resetOpenOnOuterClickBlur","resetActiveOnMouseBlur","resetActiveOnClickBlur","resetActiveOnOuterClickBlur","remove","classClicked","_this2","add","_this3","_hover","_this4","_this5","isOpen","openCheck","getAttribute","forcePrimaryClick","_primaryClick","preventDefault","defaultOptions"],"mappings":"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","file":"lib/main.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"js-base\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"feature-touch-hover\", [\"js-base\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"feature-touch-hover\"] = factory(require(\"js-base\"));\n\telse\n\t\troot[\"feature-touch-hover\"] = factory(root[\"js-base\"]);\n})(typeof self !== 'undefined' ? self : this, function(__WEBPACK_EXTERNAL_MODULE_1__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 02675a4cd9cdf646e2b0","import { features, utils } from '@goldinteractive/js-base'\n\nconst ATTR_FORCE_PRIMARY_CLICK = 'data-force'\n\nconst POINTER_TOUCH = 'touch'\nconst POINTER_PEN = 'pen'\n\nconst IE10_POINTER_TOUCH = 2\nconst IE10_POINTER_PEN = 3\n\nlet current = null\nlet instances = []\nlet touchUsed = false\nlet keyboardUsed = false\nlet clicked = false\n\ndocument.addEventListener('touchend', function(e) {\n  touchUsed = true\n})\n\ndocument.addEventListener('pointerdown', function(e) {\n  touchUsed = e.pointerType === POINTER_TOUCH || e.pointerType === POINTER_PEN\n})\n\ndocument.addEventListener('MSPointerDown', function(e) {\n  touchUsed = e.pointerType === IE10_POINTER_TOUCH || e.pointerType === IE10_POINTER_PEN\n})\n\ndocument.addEventListener('keydown', function(e) {\n  keyboardUsed = true\n})\n\ndocument.addEventListener('click', function(e) {\n  if (!clicked) {\n    instances.forEach((instance) => {\n      instance._blur(e)\n    })\n  }\n\n  // reset flags\n  touchUsed = false\n  keyboardUsed = false\n  clicked = false\n})\n\nclass TouchHover extends features.Feature {\n\n  init() {\n    instances.push(this)\n\n    this.openedByTouch = false\n    this.openedByMouseenter = false\n\n    this.initialActive = this.node.classList.contains(this.options.classActive)\n\n    this.addEventListener(this.node, 'mouseenter', this._mouseenterListener())\n    this.addEventListener(this.node, 'mouseleave', this._mouseleaveListener())\n    this.addEventListener(this.node, 'click', this._clickListener())\n  }\n\n  _blur(e) {\n    let event = document.createEvent('CustomEvent')\n    event.initCustomEvent('touch:blur', true, true, {\n      originalEvent: e\n    })\n\n    if (!this.node.dispatchEvent(event)) {\n      return false\n    }\n\n    this.openedByTouch = false\n    this.openedByMouseenter = false\n\n    if (utils.check.isFunction(this.options.resetOpen)\n        && (this.options.resetOpenOnMouseBlur\n            && ((e.type === 'mouseleave' || e.type === 'mouseenter')\n                || (e.type === 'click' && e.currentTarget !== document && this.options.resetOpenOnClickBlur)\n                || (e.type === 'click' && e.currentTarget === document && this.options.resetOpenOnOuterClickBlur)))\n    ) {\n      this.options.resetOpen.call(this)\n    }\n\n    if ((this.options.resetActiveOnMouseBlur\n         && ((e.type === 'mouseleave' || e.type === 'mouseenter'))\n             || (e.type === 'click' && e.currentTarget !== document && this.options.resetActiveOnClickBlur)\n             || (e.type === 'click' && e.currentTarget === document && this.options.resetActiveOnOuterClickBlur))\n    ) {\n      this.initialActive = false\n      this.node.classList.remove(this.options.classActive)\n    }\n\n    this.node.classList.remove(this.options.classClicked)\n  }\n\n  _hover(e) {\n    let event = document.createEvent('CustomEvent')\n    event.initCustomEvent('touch:hover', true, true, {\n      originalEvent: e\n    })\n\n    if (!this.node.dispatchEvent(event)) {\n      return false\n    }\n\n    current = this\n\n    instances.forEach((instance) => {\n      if (this !== instance) {\n        instance._blur(e)\n      }\n    })\n\n    this.node.classList.remove(this.options.classClicked)\n    this.node.classList.add(this.options.classActive)\n  }\n\n  _primaryClick(e) {\n    let event = document.createEvent('CustomEvent')\n    event.initCustomEvent('touch:click', true, true, {\n      originalEvent: e\n    })\n\n    if (!this.node.dispatchEvent(event)) {\n      return false\n    }\n\n    this.initialActive = false\n    this.openedByTouch = false\n    this.openedByMouseenter = false\n\n    if (utils.check.isFunction(this.options.resetOpen)) {\n      this.options.resetOpen.call(this)\n    }\n\n    this.node.classList.remove(this.options.classActive)\n    this.node.classList.add(this.options.classClicked)\n  }\n\n  _mouseenterListener() {\n    return (e) => {\n      if (!touchUsed) {\n        this.openedByMouseenter = true\n        this._hover(e)\n      }\n    }\n  }\n\n  _mouseleaveListener() {\n    return (e) => {\n      if (this.openedByMouseenter) {\n         this._blur(e)\n      }\n    }\n  }\n\n  _clickListener() {\n    return (e) => {\n      clicked = true\n\n      let isOpen = (utils.check.isFunction(this.options.openCheck)\n                    && this.options.openCheck.call(this))\n\n      if (this.node.getAttribute(ATTR_FORCE_PRIMARY_CLICK) !== null\n          || (utils.check.isFunction(this.options.forcePrimaryClick)\n             ? this.options.forcePrimaryClick.call(this) : this.options.forcePrimaryClick)\n          || ((this.node.classList.contains(this.options.classActive) || isOpen)\n              && (!touchUsed\n                  || (touchUsed && this.openedByTouch)\n                  || this.initialActive\n                  || (isOpen && !this.openedByTouch && !this.openedByMouseenter))\n          )\n      ) {\n        this._primaryClick(e)\n      } else {\n        e.preventDefault()\n\n        if (!this.openedByMouseenter) { // not already opened by mouseenter\n          this._hover(e)\n        }\n\n        if (touchUsed) {\n          this.openedByTouch = true\n          this.openedByMouseenter = false\n        }\n      }\n\n    }\n  }\n\n}\n\nTouchHover.defaultOptions = {\n  classActive: '-active',\n  classClicked: '-clicked',\n  forcePrimaryClick: null,\n  openCheck: null,\n  resetOpen: null,\n  resetOpenOnMouseBlur: true,\n  resetOpenOnClickBlur: true,\n  resetOpenOnOuterClickBlur: false,\n  resetActiveOnMouseBlur: true,\n  resetActiveOnClickBlur: true,\n  resetActiveOnOuterClickBlur: true\n}\n\nexport default TouchHover\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"js-base\"\n// module id = 1\n// module chunks = 0"],"sourceRoot":""}