{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 284284fa76119047f4c2","webpack:///./src/index.js","webpack:///external \"js-base\""],"names":["FEEDBACK_STATUS_SUCCESS","FEEDBACK_STATUS_WARNING","FEEDBACK_STATUS_ERROR","Form","isLoading","$form","$","$feedback","$progress","token","noValidate","addEventListener","_submitListener","_resetListener","obtainToken","tokenEndpoint","node","dataset","options","tokenPromise","loadToken","then","getTokenJsonHandler","json","setToken","data","fetch","mode","credentials","response","appendChild","buildHiddenInput","tokenFieldName","name","value","input","document","createElement","setAttribute","action","opts","Promise","resolve","reject","request","XMLHttpRequest","currentRequest","triggerHub","trigger","withCredentials","open","method","h","headers","hasOwnProperty","setRequestHeader","onload","onerror","onabort","ontimeout","upload","onprogress","_onProgress","send","body","e","target","JSON","parse","responseText","jsonParseError","msg","type","innerHTML","classList","add","feedbackClassWarning","feedbackClassError","feedbackClassSuccess","remove","$$formFields","$$","formFieldClass","forEach","$field","$message","querySelector","formFieldMessageElement","formFieldMessageClass","formFieldClassError","parentNode","removeChild","progressClassShow","setProgress","percentage","showProgress","hideProgressOnEnd","percentageRounded","Math","ceil","$loaded","$percentage","style","width","textContent","errors","error","fieldErrors","getFieldErrors","call","getErrorField","$text","formData","FormData","lengthComputable","loaded","total","abort","resetProgress","resetFeedback","resetValidation","preventDefault","_createFormData","getAttribute","classLoading","status","showFeedback","message","defaultSuccessMessage","removeFormOnSuccess","scroller","window","setTimeout","toElement","findFieldErrors","displayFieldErrors","defaultErrorMessage","catch","err","defaultAbortMessage","Feature","defaultOptions","fieldName","id","replace","$input","closest","messages"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;;;;;;;AC7DA;;;;;;;;AAEA,IAAMA,0BAA0B,CAAhC;AACA,IAAMC,0BAA0B,CAAhC;AACA,IAAMC,wBAAwB,CAA9B;;AAEA;;;;IAGMC,I;;;;;;;;;;;2BAEG;AACL,WAAKC,SAAL,GAAiB,KAAjB;;AAEA,WAAKC,KAAL,GAAa,KAAKC,CAAL,CAAO,MAAP,CAAb;AACA,WAAKC,SAAL,GAAiB,KAAKD,CAAL,CAAO,iBAAP,CAAjB;AACA,WAAKE,SAAL,GAAiB,KAAKF,CAAL,CAAO,iBAAP,CAAjB;AACA,WAAKG,KAAL,GAAa,IAAb;;AAEA,WAAKJ,KAAL,CAAWK,UAAX,GAAwB,IAAxB;;AAEA,WAAKC,gBAAL,CAAsB,KAAKN,KAA3B,EAAkC,QAAlC,EAA4C,KAAKO,eAAL,EAA5C;AACA,WAAKD,gBAAL,CAAsB,KAAKN,KAA3B,EAAkC,OAAlC,EAA2C,KAAKQ,cAAL,EAA3C;;AAEA,WAAKC,WAAL;AACD;;;kCAEa;AACZ,UAAMC,gBAAgB,KAAKC,IAAL,CAAUC,OAAV,CAAkBF,aAAlB,IAAmC,KAAKG,OAAL,CAAaH,aAAtE;AACA,UAAIA,kBAAkB,IAAtB,EAA4B;AAC1B,YAAMI,eAAe,KAAKC,SAAL,CAAeL,aAAf,CAArB;AACAI,qBAAaE,IAAb,CAAkB,KAAKC,mBAAL,EAAlB;AACD;AACF;;;0CAEqB;AAAA;;AACpB,aAAO,UAACC,IAAD,EAAU;AACf,eAAKC,QAAL,CAAcD,KAAKE,IAAL,CAAUhB,KAAxB;AACD,OAFD;AAGD;;;8BAESM,a,EAAe;AACvB,aAAOW,MAAMX,aAAN,EAAqB;AAC1BY,cAAM,MADoB;AAE1BC,qBAAa;AAFa,OAArB,EAGJP,IAHI,CAGC;AAAA,eAAYQ,SAASN,IAAT,EAAZ;AAAA,OAHD,CAAP;AAID;;AAED;;;;;;;;6BAKSd,K,EAAO;AACd,WAAKA,KAAL,GAAaA,KAAb;;AAEA,WAAKJ,KAAL,CAAWyB,WAAX,CAAuB,KAAKC,gBAAL,CAAsB,KAAKb,OAAL,CAAac,cAAnC,EAAmDvB,KAAnD,CAAvB;AACD;;;qCAEgBwB,I,EAAMC,K,EAAO;AAC5B,UAAMC,QAAQC,SAASC,aAAT,CAAuB,OAAvB,CAAd;;AAEAF,YAAMG,YAAN,CAAmB,MAAnB,EAA2B,QAA3B;AACAH,YAAMG,YAAN,CAAmB,MAAnB,EAA2BL,IAA3B;AACAE,YAAMG,YAAN,CAAmB,OAAnB,EAA4BJ,KAA5B;;AAEA,aAAOC,KAAP;AACD;;;0BAEKI,M,EAAQC,I,EAAM;AAAA;;AAClB,aAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC;AACA;AACA,YAAMC,UAAU,IAAIC,cAAJ,EAAhB;AACA,eAAKC,cAAL,GAAsBF,OAAtB;;AAEA,eAAKG,UAAL,CAAgB,iBAAhB,EAAmCP,IAAnC,EAAyCI,OAAzC;AACA,eAAKI,OAAL,CAAa,YAAb,EAA2BR,IAA3B,EAAiCI,OAAjC;;AAEAA,gBAAQK,eAAR,GAA0B,IAA1B;AACAL,gBAAQM,IAAR,CAAaV,KAAKW,MAAL,IAAe,MAA5B,EAAoCZ,MAApC;;AAEA,aAAK,IAAIa,CAAT,IAAcZ,KAAKa,OAAL,IAAgB,EAA9B,EAAkC;AAChC,cAAIb,KAAKa,OAAL,CAAaC,cAAb,CAA4BF,CAA5B,CAAJ,EAAoC;AAClCR,oBAAQW,gBAAR,CAAyBH,CAAzB,EAA4BZ,KAAKa,OAAL,CAAaD,CAAb,CAA5B;AACD;AACF;;AAEDR,gBAAQY,MAAR,GAAiBd,OAAjB;AACAE,gBAAQa,OAAR,GAAkBf,OAAlB;AACAE,gBAAQc,OAAR,GAAkBf,MAAlB;AACAC,gBAAQe,SAAR,GAAoBhB,MAApB;;AAEA,YAAI,OAAKnC,SAAL,IAAkBoC,QAAQgB,MAA9B,EAAsC;AACpChB,kBAAQgB,MAAR,CAAeC,UAAf,GAA4B,OAAKC,WAAL,EAA5B;AACD;;AAEDlB,gBAAQmB,IAAR,CAAavB,KAAKwB,IAAlB;AACD,OA5BM,EA4BJ3C,IA5BI,CA4BC,UAAC4C,CAAD,EAAO;AACb,YAAMrB,UAAUqB,EAAEC,MAAlB;AACA,YAAI;AACF,cAAM3C,OAAO4C,KAAKC,KAAL,CAAWxB,QAAQyB,YAAnB,CAAb;AACA,iBAAO,EAAE9C,UAAF,EAAQqB,gBAAR,EAAP;AACD,SAHD,CAGE,OAAO0B,cAAP,EAAuB;AACvB;AACA;AACA,gBAAMA,cAAN;AACD;AACF,OAtCM,CAAP;AAuCD;;;iCAEYC,G,EAAqC;AAAA,UAAhCC,IAAgC,uEAAzBxE,uBAAyB;;AAChD,WAAKO,SAAL,CAAekE,SAAf,GAA2BF,GAA3B;;AAEA,cAAQC,IAAR;AACE,aAAKvE,uBAAL;AACE,eAAKM,SAAL,CAAemE,SAAf,CAAyBC,GAAzB,CAA6B,KAAKzD,OAAL,CAAa0D,oBAA1C;AACA;AACF,aAAK1E,qBAAL;AACE,eAAKK,SAAL,CAAemE,SAAf,CAAyBC,GAAzB,CAA6B,KAAKzD,OAAL,CAAa2D,kBAA1C;AACA;AACF,aAAK7E,uBAAL;AACA;AACE,eAAKO,SAAL,CAAemE,SAAf,CAAyBC,GAAzB,CAA6B,KAAKzD,OAAL,CAAa4D,oBAA1C;AATJ;AAWD;;;oCAEe;AACd,WAAKvE,SAAL,CAAekE,SAAf,GAA2B,EAA3B;AACA,WAAKlE,SAAL,CAAemE,SAAf,CAAyBK,MAAzB,CAAgC,KAAK7D,OAAL,CAAa0D,oBAA7C;AACA,WAAKrE,SAAL,CAAemE,SAAf,CAAyBK,MAAzB,CAAgC,KAAK7D,OAAL,CAAa2D,kBAA7C;AACA,WAAKtE,SAAL,CAAemE,SAAf,CAAyBK,MAAzB,CAAgC,KAAK7D,OAAL,CAAa4D,oBAA7C;AACD;;;sCAEiB;AAAA;;AAChB,UAAIE,eAAe,KAAKC,EAAL,OAAY,KAAK/D,OAAL,CAAagE,cAAzB,CAAnB;;AAEAF,mBAAaG,OAAb,CAAqB,UAACC,MAAD,EAAY;AAC/B,YAAIC,WAAWD,OAAOE,aAAP,CAAwB,OAAKpE,OAAL,CAAaqE,uBAArC,SAAgE,OAAKrE,OAAL,CAAasE,qBAA7E,CAAf;AACAJ,eAAOV,SAAP,CAAiBK,MAAjB,CAAwB,OAAK7D,OAAL,CAAauE,mBAArC;;AAEA,YAAIJ,QAAJ,EAAc;AACZA,mBAASK,UAAT,CAAoBC,WAApB,CAAgCN,QAAhC;AACD;AACF,OAPD;AAQD;;;oCAEe;AACd,UAAI,CAAC,KAAK7E,SAAV,EAAqB;AACrB,WAAKA,SAAL,CAAekE,SAAf,CAAyBK,MAAzB,CAAgC,KAAK7D,OAAL,CAAa0E,iBAA7C;AACA,WAAKC,WAAL,CAAiB,CAAjB;AACD;;;gCAEWC,U,EAAY;AACtB,UAAI,CAAC,KAAKtF,SAAN,IAAmB,CAAC,KAAKU,OAAL,CAAa6E,YAArC,EAAmD;;AAEnD,UAAID,eAAe,CAAf,IACGA,eAAe,CAAf,IAAoB,KAAK5E,OAAL,CAAa8E,iBADxC,EAEE;AACA,aAAKxF,SAAL,CAAekE,SAAf,CAAyBK,MAAzB,CAAgC,KAAK7D,OAAL,CAAa0E,iBAA7C;AACD,OAJD,MAIO;AACL,aAAKpF,SAAL,CAAekE,SAAf,CAAyBC,GAAzB,CAA6B,KAAKzD,OAAL,CAAa0E,iBAA1C;AACD;;AAEDE,mBAAaA,aAAa,GAA1B;AACA,UAAIG,oBAAoBC,KAAKC,IAAL,CAAUL,UAAV,CAAxB;;AAEA,UAAIM,UAAU,KAAK5F,SAAL,CAAe8E,aAAf,CAA6B,eAA7B,CAAd;AACA,UAAIe,cAAc,KAAK7F,SAAL,CAAe8E,aAAf,CAA6B,mBAA7B,CAAlB;;AAEAc,cAAQE,KAAR,CAAcC,KAAd,GAAyBN,iBAAzB;AACAI,kBAAYG,WAAZ,GAA6BP,iBAA7B;AACD;;;uCAEkBQ,M,EAAQ;AAAA;;AACzBA,aAAOtB,OAAP,CAAe,UAACuB,KAAD,EAAW;AACxB,YAAIC,cAAc,OAAKzF,OAAL,CAAa0F,cAAb,CAA4BC,IAA5B,SAAuCH,KAAvC,CAAlB;AACA,YAAItB,SAAS,OAAKlE,OAAL,CAAa4F,aAAb,CAA2BD,IAA3B,SAAsCH,KAAtC,CAAb;;AAEA,YAAItB,MAAJ,EAAY;AACVA,iBAAOV,SAAP,CAAiBC,GAAjB,CAAqB,OAAKzD,OAAL,CAAauE,mBAAlC;AACA,cAAIJ,WAAWD,OAAOE,aAAP,CAAwB,OAAKpE,OAAL,CAAaqE,uBAArC,SAAgE,OAAKrE,OAAL,CAAasE,qBAA7E,CAAf;;AAEA,cAAI,CAACH,QAAL,EAAe;AACbA,uBAAWjD,SAASC,aAAT,CAAuB,OAAKnB,OAAL,CAAaqE,uBAApC,CAAX;AACAF,qBAASX,SAAT,CAAmBC,GAAnB,CAAuB,OAAKzD,OAAL,CAAasE,qBAApC;AACAJ,mBAAOtD,WAAP,CAAmBuD,QAAnB;AACD;;AAEDA,mBAASZ,SAAT,GAAqB,EAArB;;AAEA,cAAIsC,QAAQ3E,SAASC,aAAT,CAAuB,MAAvB,CAAZ;AACA0E,gBAAMP,WAAN,GAAoBG,YAAY,CAAZ,CAApB;;AAEAtB,mBAASvD,WAAT,CAAqBiF,KAArB;AACD;AACF,OArBD;AAsBD;;;sCAEiB;AAChB,UAAIC,WAAW,IAAIC,QAAJ,CAAa,KAAK5G,KAAlB,CAAf;AACA,aAAO2G,QAAP;AACD;;;kCAEa;AAAA;;AACZ,aAAO,UAAC/C,CAAD,EAAO;AACZ,YAAIA,EAAEiD,gBAAN,EAAwB;AACtB,iBAAKrB,WAAL,CAAiB5B,EAAEkD,MAAF,GAAWlD,EAAEmD,KAA9B;AACD;AACF,OAJD;AAKD;;;qCAEgB;AAAA;;AACf,aAAO,YAAM;AACX,YAAI,OAAKtE,cAAT,EAAyB;AACvB,iBAAKA,cAAL,CAAoBuE,KAApB;AACD;;AAED,eAAKC,aAAL;AACA,eAAKC,aAAL;AACA,eAAKC,eAAL;AACD,OARD;AASD;;;sCAEiB;AAAA;;AAChB,aAAO,UAACvD,CAAD,EAAO;AACZA,UAAEwD,cAAF;AACA,YAAI,OAAKrH,SAAT,EAAoB;;AAEpB,eAAKA,SAAL,GAAiB,IAAjB;;AAEA,YAAI4G,WAAW,OAAKU,eAAL,EAAf;AACA,YAAInF,SAAS,OAAKlC,KAAL,CAAWsH,YAAX,CAAwB,QAAxB,CAAb;AACA,YAAIxE,SAAS,OAAK9C,KAAL,CAAWsH,YAAX,CAAwB,QAAxB,CAAb;;AAEA,eAAKL,aAAL;AACA,eAAKC,aAAL;AACA,eAAKC,eAAL;;AAEA,eAAKxG,IAAL,CAAU0D,SAAV,CAAoBC,GAApB,CAAwB,OAAKzD,OAAL,CAAa0G,YAArC;;AAEA,eAAKlG,KAAL,CAAWa,MAAX,EAAmB;AACjByB,gBAAMgD,QADW;AAEjB7D,kBAAQA;AAFS,SAAnB,EAGG9B,IAHH,CAGQ,UAACQ,QAAD,EAAc;AACpB,iBAAKkB,UAAL,CAAgB,WAAhB,EAA6BlB,QAA7B;AACA,iBAAKmB,OAAL,CAAa,MAAb,EAAqBnB,QAArB;;AAEA,iBAAKzB,SAAL,GAAiB,KAAjB;AACA,iBAAKY,IAAL,CAAU0D,SAAV,CAAoBK,MAApB,CAA2B,OAAK7D,OAAL,CAAa0G,YAAxC;;AAEA,cAAI/F,SAASN,IAAT,CAAcsG,MAAd,IAAwB,GAAxB,IAA+BhG,SAASN,IAAT,CAAcsG,MAAd,GAAuB,GAA1D,EAA+D;AAC7D,mBAAK9E,UAAL,CAAgB,kBAAhB,EAAoClB,QAApC;AACA,mBAAKmB,OAAL,CAAa,aAAb,EAA4BnB,QAA5B;;AAEA,mBAAKiG,YAAL,CAAkBjG,SAASN,IAAT,CAAcwG,OAAd,IAAyB,OAAK7G,OAAL,CAAa8G,qBAAxD;;AAEA,gBAAI,OAAK9G,OAAL,CAAa+G,mBAAjB,EAAsC;AACpC,qBAAK5H,KAAL,CAAWqF,UAAX,CAAsBC,WAAtB,CAAkC,OAAKtF,KAAvC;;AAEA,kBAAI,OAAKa,OAAL,CAAagH,QAAjB,EAA2B;AACzBC,uBAAOC,UAAP,CAAkB,YAAM;AACtB,yBAAKlH,OAAL,CAAagH,QAAb,CAAsBG,SAAtB,CAAgC,OAAK9H,SAAL,IAAkB,OAAKS,IAAvD;AACD,iBAFD,EAEG,CAFH;AAGD;AACF;AACF,WAfD,MAeO;AACL,mBAAK+B,UAAL,CAAgB,gBAAhB,EAAkClB,QAAlC;AACA,mBAAKmB,OAAL,CAAa,WAAb,EAA0BnB,QAA1B;;AAEA,gBAAI4E,SAAS,OAAKvF,OAAL,CAAaoH,eAAb,CAA6BzG,SAASN,IAAtC,CAAb;;AAEA,gBAAIkF,MAAJ,EAAY;AACV,qBAAK8B,kBAAL,CAAwB9B,MAAxB;;AAEA,kBAAI5E,SAASN,IAAT,CAAcwG,OAAlB,EAA2B;AACzB,uBAAKD,YAAL,CAAkBjG,SAASN,IAAT,CAAcwG,OAAhC,EAAyC7H,qBAAzC;AACD;AACF,aAND,MAMO;AACL,qBAAK4H,YAAL,CAAkBjG,SAASN,IAAT,CAAcwG,OAAd,IAAyB,OAAK7G,OAAL,CAAasH,mBAAxD,EAA6EtI,qBAA7E;AACD;AACF;AACF,SAzCD,EAyCGuI,KAzCH,CAyCS,UAACC,GAAD,EAAS;AAChB,iBAAKtI,SAAL,GAAiB,KAAjB;AACA,iBAAKY,IAAL,CAAU0D,SAAV,CAAoBK,MAApB,CAA2B,OAAK7D,OAAL,CAAa0G,YAAxC;;AAEA;AACA,cAAIc,IAAIlE,IAAJ,KAAa,OAAjB,EAA0B;AACxB,mBAAKsD,YAAL,CAAkB,OAAK5G,OAAL,CAAayH,mBAA/B,EAAoD1I,uBAApD;AACA,kBAAMyI,GAAN;AACD,WAHD,MAGO;AACL,mBAAKZ,YAAL,CAAkB,OAAK5G,OAAL,CAAasH,mBAA/B,EAAoDtI,qBAApD;AACA,kBAAMwI,GAAN;AACD;AACF,SArDD;AAsDD,OAtED;AAuED;;;;EA/RgB,iBAASE,O;;AAmS5B;;;;;AAGAzI,KAAK0I,cAAL,GAAsB;AACpBX,YAAU,IADU;AAEpBF,yBAAuB,wCAFH;AAGpBQ,uBAAqB,uDAHD;AAIpBG,uBAAqB,mCAJD;AAKpBf,gBAAc,UALM;AAMpBK,uBAAqB,IAND;AAOpBlC,gBAAc,IAPM;AAQpBC,qBAAmB,IARC;AASpBJ,qBAAmB,OATC;AAUpBV,kBAAgB,YAVI;AAWpBO,uBAAqB,QAXD;AAYpBF,2BAAyB,KAZL;AAapBC,yBAAuB,SAbH;AAcpBV,wBAAsB,UAdF;AAepBF,wBAAsB,UAfF;AAgBpBC,sBAAoB,QAhBA;AAiBpB;AACA9D,iBAAe,IAlBK;AAmBpBiB,kBAAgB,QAnBI;AAoBpBsG,mBAAiB,yBAAS/G,IAAT,EAAe;AAC9B,WAAOA,KAAKkF,MAAZ;AACD,GAtBmB;AAuBpBK,iBAAe,uBAASJ,KAAT,EAAgB;AAC7B,QAAMoC,YAAYpC,MAAMqC,EAAN,CAASC,OAAT,CAAiB,SAAjB,EAA4B,EAA5B,CAAlB;AACA,QAAIC,SAAS,KAAK5I,KAAL,CAAWiF,aAAX,oBAA0CwD,SAA1C,SAAb;AACA,QAAI,CAACG,MAAL,EAAa,OAAO,IAAP;AACb,WAAOA,OAAOC,OAAP,OAAmB,KAAKhI,OAAL,CAAagE,cAAhC,CAAP;AACD,GA5BmB;AA6BpB0B,kBAAgB,wBAASF,KAAT,EAAgB;AAC9B,WAAOA,MAAMyC,QAAb;AACD;AA/BmB,CAAtB;;kBAkCehJ,I;;;;;;ACjVf,+C","file":"lib/main.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"js-base\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"feature-form\", [\"js-base\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"feature-form\"] = factory(require(\"js-base\"));\n\telse\n\t\troot[\"feature-form\"] = factory(root[\"js-base\"]);\n})(typeof self !== 'undefined' ? self : this, function(__WEBPACK_EXTERNAL_MODULE_1__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 284284fa76119047f4c2","import { features } from '@goldinteractive/js-base'\n\nconst FEEDBACK_STATUS_SUCCESS = 0\nconst FEEDBACK_STATUS_WARNING = 1\nconst FEEDBACK_STATUS_ERROR = 2\n\n/**\n * Form feature class.\n */\nclass Form extends features.Feature {\n\n  init() {\n    this.isLoading = false\n\n    this.$form = this.$('form')\n    this.$feedback = this.$('[data-feedback]')\n    this.$progress = this.$('[data-progress]')\n    this.token = null\n\n    this.$form.noValidate = true\n\n    this.addEventListener(this.$form, 'submit', this._submitListener())\n    this.addEventListener(this.$form, 'reset', this._resetListener())\n\n    this.obtainToken()\n  }\n\n  obtainToken() {\n    const tokenEndpoint = this.node.dataset.tokenEndpoint || this.options.tokenEndpoint\n    if (tokenEndpoint !== null) {\n      const tokenPromise = this.loadToken(tokenEndpoint)\n      tokenPromise.then(this.getTokenJsonHandler())\n    }\n  }\n\n  getTokenJsonHandler() {\n    return (json) => {\n      this.setToken(json.data.token)\n    }\n  }\n\n  loadToken(tokenEndpoint) {\n    return fetch(tokenEndpoint, {\n      mode: 'cors',\n      credentials: 'include'\n    }).then(response => response.json())\n  }\n\n  /**\n   * Sets the token for the form and creates a hidden input\n   * This method can only be called once - otherwise there might be multiple hidden inputs\n   * @param {string} token \n   */\n  setToken(token) {\n    this.token = token\n\n    this.$form.appendChild(this.buildHiddenInput(this.options.tokenFieldName, token))\n  }\n\n  buildHiddenInput(name, value) {\n    const input = document.createElement('input');\n\n    input.setAttribute('type', 'hidden');\n    input.setAttribute('name', name);\n    input.setAttribute('value', value);\n\n    return input\n  }\n\n  fetch(action, opts) {\n    return new Promise((resolve, reject) => {\n      // using XMLHttpRequest due to fetch spec lacking support for request progression\n      // see: https://fetch.spec.whatwg.org/#fetch-api\n      const request = new XMLHttpRequest()\n      this.currentRequest = request\n\n      this.triggerHub('form:beforeSend', opts, request)\n      this.trigger('beforeSend', opts, request)\n\n      request.withCredentials = true\n      request.open(opts.method || 'post', action)\n\n      for (let h in opts.headers || {}) {\n        if (opts.headers.hasOwnProperty(h)) {\n          request.setRequestHeader(h, opts.headers[h])\n        }\n      }\n\n      request.onload = resolve\n      request.onerror = resolve\n      request.onabort = reject\n      request.ontimeout = reject\n\n      if (this.$progress && request.upload) {\n        request.upload.onprogress = this._onProgress()\n      }\n\n      request.send(opts.body)\n    }).then((e) => {\n      const request = e.target\n      try {\n        const json = JSON.parse(request.responseText)\n        return { json, request }\n      } catch (jsonParseError) {\n        // happens either on network issues or invalid response\n        // anyway it's not possible to handle this exception\n        throw jsonParseError\n      }\n    })\n  }\n\n  showFeedback(msg, type = FEEDBACK_STATUS_SUCCESS) {\n    this.$feedback.innerHTML = msg\n\n    switch (type) {\n      case FEEDBACK_STATUS_WARNING:\n        this.$feedback.classList.add(this.options.feedbackClassWarning)\n        break\n      case FEEDBACK_STATUS_ERROR:\n        this.$feedback.classList.add(this.options.feedbackClassError)\n        break\n      case FEEDBACK_STATUS_SUCCESS:\n      default:\n        this.$feedback.classList.add(this.options.feedbackClassSuccess)\n    }\n  }\n\n  resetFeedback() {\n    this.$feedback.innerHTML = ''\n    this.$feedback.classList.remove(this.options.feedbackClassWarning)\n    this.$feedback.classList.remove(this.options.feedbackClassError)\n    this.$feedback.classList.remove(this.options.feedbackClassSuccess)\n  }\n\n  resetValidation() {\n    let $$formFields = this.$$(`.${this.options.formFieldClass}`)\n\n    $$formFields.forEach(($field) => {\n      let $message = $field.querySelector(`${this.options.formFieldMessageElement}.${this.options.formFieldMessageClass}`)\n      $field.classList.remove(this.options.formFieldClassError)\n\n      if ($message) {\n        $message.parentNode.removeChild($message)\n      }\n    })\n  }\n\n  resetProgress() {\n    if (!this.$progress) return\n    this.$progress.classList.remove(this.options.progressClassShow)\n    this.setProgress(0)\n  }\n\n  setProgress(percentage) {\n    if (!this.$progress || !this.options.showProgress) return\n\n    if (percentage === 0\n        || percentage === 1 && this.options.hideProgressOnEnd\n    ) {\n      this.$progress.classList.remove(this.options.progressClassShow)\n    } else {\n      this.$progress.classList.add(this.options.progressClassShow)\n    }\n\n    percentage = percentage * 100\n    let percentageRounded = Math.ceil(percentage)\n\n    let $loaded = this.$progress.querySelector('[data-loaded]')\n    let $percentage = this.$progress.querySelector('[data-percentage]')\n\n    $loaded.style.width = `${percentageRounded}%`\n    $percentage.textContent = `${percentageRounded}%`\n  }\n\n  displayFieldErrors(errors) {\n    errors.forEach((error) => {\n      let fieldErrors = this.options.getFieldErrors.call(this, error)\n      let $field = this.options.getErrorField.call(this, error)\n\n      if ($field) {\n        $field.classList.add(this.options.formFieldClassError)\n        let $message = $field.querySelector(`${this.options.formFieldMessageElement}.${this.options.formFieldMessageClass}`)\n\n        if (!$message) {\n          $message = document.createElement(this.options.formFieldMessageElement)\n          $message.classList.add(this.options.formFieldMessageClass)\n          $field.appendChild($message)\n        }\n\n        $message.innerHTML = ''\n\n        let $text = document.createElement('span')\n        $text.textContent = fieldErrors[0]\n\n        $message.appendChild($text)\n      }\n    })\n  }\n\n  _createFormData() {\n    let formData = new FormData(this.$form)\n    return formData\n  }\n\n  _onProgress() {\n    return (e) => {\n      if (e.lengthComputable) {\n        this.setProgress(e.loaded / e.total)\n      }\n    }\n  }\n\n  _resetListener() {\n    return () => {\n      if (this.currentRequest) {\n        this.currentRequest.abort()\n      }\n\n      this.resetProgress()\n      this.resetFeedback()\n      this.resetValidation()\n    }\n  }\n\n  _submitListener() {\n    return (e) => {\n      e.preventDefault()\n      if (this.isLoading) return\n\n      this.isLoading = true\n\n      let formData = this._createFormData()\n      let action = this.$form.getAttribute('action')\n      let method = this.$form.getAttribute('method')\n\n      this.resetProgress()\n      this.resetFeedback()\n      this.resetValidation()\n\n      this.node.classList.add(this.options.classLoading)\n\n      this.fetch(action, {\n        body: formData,\n        method: method\n      }).then((response) => {\n        this.triggerHub('form:send', response)\n        this.trigger('send', response)\n\n        this.isLoading = false\n        this.node.classList.remove(this.options.classLoading)\n\n        if (response.json.status >= 200 && response.json.status < 300) {\n          this.triggerHub('form:sendSuccess', response)\n          this.trigger('sendSuccess', response)\n\n          this.showFeedback(response.json.message || this.options.defaultSuccessMessage)\n\n          if (this.options.removeFormOnSuccess) {\n            this.$form.parentNode.removeChild(this.$form)\n\n            if (this.options.scroller) {\n              window.setTimeout(() => {\n                this.options.scroller.toElement(this.$feedback || this.node)\n              }, 0)\n            }\n          }\n        } else {\n          this.triggerHub('form:sendError', response)\n          this.trigger('sendError', response)\n\n          let errors = this.options.findFieldErrors(response.json)\n\n          if (errors) {\n            this.displayFieldErrors(errors)\n\n            if (response.json.message) {\n              this.showFeedback(response.json.message, FEEDBACK_STATUS_ERROR)\n            }\n          } else {\n            this.showFeedback(response.json.message || this.options.defaultErrorMessage, FEEDBACK_STATUS_ERROR)\n          }\n        }\n      }).catch((err) => {\n        this.isLoading = false\n        this.node.classList.remove(this.options.classLoading)\n\n        // abort means user interrupted\n        if (err.type === 'abort') {\n          this.showFeedback(this.options.defaultAbortMessage, FEEDBACK_STATUS_WARNING)\n          throw err\n        } else {\n          this.showFeedback(this.options.defaultErrorMessage, FEEDBACK_STATUS_ERROR)\n          throw err\n        }\n      })\n    }\n  }\n\n}\n\n/**\n * Default feature options.\n */\nForm.defaultOptions = {\n  scroller: null,\n  defaultSuccessMessage: 'Nachricht wurde erfolgreich versendet!',\n  defaultErrorMessage: 'Beim Senden der Nachricht ist ein Fehler aufgetreten!',\n  defaultAbortMessage: 'Sie haben das Senden abgebrochen.',\n  classLoading: '-loading',\n  removeFormOnSuccess: true,\n  showProgress: true,\n  hideProgressOnEnd: true,\n  progressClassShow: '-show',\n  formFieldClass: 'form-field',\n  formFieldClassError: '-error',\n  formFieldMessageElement: 'div',\n  formFieldMessageClass: 'message',\n  feedbackClassSuccess: '-success',\n  feedbackClassWarning: '-warning',\n  feedbackClassError: '-error',\n  // priority: data-token-endpoint, options.tokenEndpoint, defaultOptions.tokenEndpoint\n  tokenEndpoint: null,\n  tokenFieldName: '_token',\n  findFieldErrors: function(json) {\n    return json.errors\n  },\n  getErrorField: function(error) {\n    const fieldName = error.id.replace('fields.', '')\n    let $input = this.$form.querySelector(`[name=\"fields[${fieldName}]\"]`)\n    if (!$input) return null\n    return $input.closest(`.${this.options.formFieldClass}`)\n  },\n  getFieldErrors: function(error) {\n    return error.messages\n  }\n}\n\nexport default Form\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"js-base\"\n// module id = 1\n// module chunks = 0"],"sourceRoot":""}