{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 284284fa76119047f4c2","webpack:///./src/index.js","webpack:///external \"js-base\""],"names":["root","factory","exports","module","require","define","amd","self","this","__WEBPACK_EXTERNAL_MODULE_1__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","_jsBase","Form","features","Feature","isLoading","$form","$","$feedback","$progress","token","noValidate","addEventListener","_submitListener","_resetListener","obtainToken","tokenEndpoint","node","dataset","options","loadToken","then","getTokenJsonHandler","_this2","json","setToken","data","fetch","mode","credentials","response","appendChild","buildHiddenInput","tokenFieldName","value","input","document","createElement","setAttribute","action","opts","_this3","Promise","resolve","reject","request","XMLHttpRequest","h","currentRequest","triggerHub","trigger","withCredentials","open","method","headers","setRequestHeader","onload","onerror","onabort","ontimeout","upload","onprogress","_onProgress","send","body","e","target","JSON","parse","responseText","jsonParseError","msg","type","arguments","length","undefined","innerHTML","classList","add","feedbackClassWarning","feedbackClassError","feedbackClassSuccess","remove","_this4","$$","formFieldClass","forEach","$field","$message","querySelector","formFieldMessageElement","formFieldMessageClass","formFieldClassError","parentNode","removeChild","progressClassShow","setProgress","percentage","showProgress","hideProgressOnEnd","percentageRounded","Math","ceil","$loaded","$percentage","style","width","textContent","errors","_this5","error","fieldErrors","getFieldErrors","getErrorField","$text","FormData","_this6","lengthComputable","loaded","total","_this7","abort","resetProgress","resetFeedback","resetValidation","_this8","preventDefault","formData","_createFormData","getAttribute","classLoading","status","showFeedback","message","defaultSuccessMessage","removeFormOnSuccess","scroller","window","setTimeout","toElement","findFieldErrors","displayFieldErrors","defaultErrorMessage","catch","err","defaultAbortMessage","defaultOptions","fieldName","id","replace","$input","closest","messages"],"mappings":"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","file":"lib/main.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"js-base\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"feature-form\", [\"js-base\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"feature-form\"] = factory(require(\"js-base\"));\n\telse\n\t\troot[\"feature-form\"] = factory(root[\"js-base\"]);\n})(typeof self !== 'undefined' ? self : this, function(__WEBPACK_EXTERNAL_MODULE_1__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 284284fa76119047f4c2","import { features } from '@goldinteractive/js-base'\n\nconst FEEDBACK_STATUS_SUCCESS = 0\nconst FEEDBACK_STATUS_WARNING = 1\nconst FEEDBACK_STATUS_ERROR = 2\n\n/**\n * Form feature class.\n */\nclass Form extends features.Feature {\n\n  init() {\n    this.isLoading = false\n\n    this.$form = this.$('form')\n    this.$feedback = this.$('[data-feedback]')\n    this.$progress = this.$('[data-progress]')\n    this.token = null\n\n    this.$form.noValidate = true\n\n    this.addEventListener(this.$form, 'submit', this._submitListener())\n    this.addEventListener(this.$form, 'reset', this._resetListener())\n\n    this.obtainToken()\n  }\n\n  obtainToken() {\n    const tokenEndpoint = this.node.dataset.tokenEndpoint || this.options.tokenEndpoint\n    if (tokenEndpoint !== null) {\n      const tokenPromise = this.loadToken(tokenEndpoint)\n      tokenPromise.then(this.getTokenJsonHandler())\n    }\n  }\n\n  getTokenJsonHandler() {\n    return (json) => {\n      this.setToken(json.data.token)\n    }\n  }\n\n  loadToken(tokenEndpoint) {\n    return fetch(tokenEndpoint, {\n      mode: 'cors',\n      credentials: 'include'\n    }).then(response => response.json())\n  }\n\n  /**\n   * Sets the token for the form and creates a hidden input\n   * This method can only be called once - otherwise there might be multiple hidden inputs\n   * @param {string} token \n   */\n  setToken(token) {\n    this.token = token\n\n    this.$form.appendChild(this.buildHiddenInput(this.options.tokenFieldName, token))\n  }\n\n  buildHiddenInput(name, value) {\n    const input = document.createElement('input');\n\n    input.setAttribute('type', 'hidden');\n    input.setAttribute('name', name);\n    input.setAttribute('value', value);\n\n    return input\n  }\n\n  fetch(action, opts) {\n    return new Promise((resolve, reject) => {\n      // using XMLHttpRequest due to fetch spec lacking support for request progression\n      // see: https://fetch.spec.whatwg.org/#fetch-api\n      const request = new XMLHttpRequest()\n      this.currentRequest = request\n\n      this.triggerHub('form:beforeSend', opts, request)\n      this.trigger('beforeSend', opts, request)\n\n      request.withCredentials = true\n      request.open(opts.method || 'post', action)\n\n      for (let h in opts.headers || {}) {\n        if (opts.headers.hasOwnProperty(h)) {\n          request.setRequestHeader(h, opts.headers[h])\n        }\n      }\n\n      request.onload = resolve\n      request.onerror = resolve\n      request.onabort = reject\n      request.ontimeout = reject\n\n      if (this.$progress && request.upload) {\n        request.upload.onprogress = this._onProgress()\n      }\n\n      request.send(opts.body)\n    }).then((e) => {\n      const request = e.target\n      try {\n        const json = JSON.parse(request.responseText)\n        return { json, request }\n      } catch (jsonParseError) {\n        // happens either on network issues or invalid response\n        // anyway it's not possible to handle this exception\n        throw jsonParseError\n      }\n    })\n  }\n\n  showFeedback(msg, type = FEEDBACK_STATUS_SUCCESS) {\n    this.$feedback.innerHTML = msg\n\n    switch (type) {\n      case FEEDBACK_STATUS_WARNING:\n        this.$feedback.classList.add(this.options.feedbackClassWarning)\n        break\n      case FEEDBACK_STATUS_ERROR:\n        this.$feedback.classList.add(this.options.feedbackClassError)\n        break\n      case FEEDBACK_STATUS_SUCCESS:\n      default:\n        this.$feedback.classList.add(this.options.feedbackClassSuccess)\n    }\n  }\n\n  resetFeedback() {\n    this.$feedback.innerHTML = ''\n    this.$feedback.classList.remove(this.options.feedbackClassWarning)\n    this.$feedback.classList.remove(this.options.feedbackClassError)\n    this.$feedback.classList.remove(this.options.feedbackClassSuccess)\n  }\n\n  resetValidation() {\n    let $$formFields = this.$$(`.${this.options.formFieldClass}`)\n\n    $$formFields.forEach(($field) => {\n      let $message = $field.querySelector(`${this.options.formFieldMessageElement}.${this.options.formFieldMessageClass}`)\n      $field.classList.remove(this.options.formFieldClassError)\n\n      if ($message) {\n        $message.parentNode.removeChild($message)\n      }\n    })\n  }\n\n  resetProgress() {\n    if (!this.$progress) return\n    this.$progress.classList.remove(this.options.progressClassShow)\n    this.setProgress(0)\n  }\n\n  setProgress(percentage) {\n    if (!this.$progress || !this.options.showProgress) return\n\n    if (percentage === 0\n        || percentage === 1 && this.options.hideProgressOnEnd\n    ) {\n      this.$progress.classList.remove(this.options.progressClassShow)\n    } else {\n      this.$progress.classList.add(this.options.progressClassShow)\n    }\n\n    percentage = percentage * 100\n    let percentageRounded = Math.ceil(percentage)\n\n    let $loaded = this.$progress.querySelector('[data-loaded]')\n    let $percentage = this.$progress.querySelector('[data-percentage]')\n\n    $loaded.style.width = `${percentageRounded}%`\n    $percentage.textContent = `${percentageRounded}%`\n  }\n\n  displayFieldErrors(errors) {\n    errors.forEach((error) => {\n      let fieldErrors = this.options.getFieldErrors.call(this, error)\n      let $field = this.options.getErrorField.call(this, error)\n\n      if ($field) {\n        $field.classList.add(this.options.formFieldClassError)\n        let $message = $field.querySelector(`${this.options.formFieldMessageElement}.${this.options.formFieldMessageClass}`)\n\n        if (!$message) {\n          $message = document.createElement(this.options.formFieldMessageElement)\n          $message.classList.add(this.options.formFieldMessageClass)\n          $field.appendChild($message)\n        }\n\n        $message.innerHTML = ''\n\n        let $text = document.createElement('span')\n        $text.textContent = fieldErrors[0]\n\n        $message.appendChild($text)\n      }\n    })\n  }\n\n  _createFormData() {\n    let formData = new FormData(this.$form)\n    return formData\n  }\n\n  _onProgress() {\n    return (e) => {\n      if (e.lengthComputable) {\n        this.setProgress(e.loaded / e.total)\n      }\n    }\n  }\n\n  _resetListener() {\n    return () => {\n      if (this.currentRequest) {\n        this.currentRequest.abort()\n      }\n\n      this.resetProgress()\n      this.resetFeedback()\n      this.resetValidation()\n    }\n  }\n\n  _submitListener() {\n    return (e) => {\n      e.preventDefault()\n      if (this.isLoading) return\n\n      this.isLoading = true\n\n      let formData = this._createFormData()\n      let action = this.$form.getAttribute('action')\n      let method = this.$form.getAttribute('method')\n\n      this.resetProgress()\n      this.resetFeedback()\n      this.resetValidation()\n\n      this.node.classList.add(this.options.classLoading)\n\n      this.fetch(action, {\n        body: formData,\n        method: method\n      }).then((response) => {\n        this.triggerHub('form:send', response)\n        this.trigger('send', response)\n\n        this.isLoading = false\n        this.node.classList.remove(this.options.classLoading)\n\n        if (response.json.status >= 200 && response.json.status < 300) {\n          this.triggerHub('form:sendSuccess', response)\n          this.trigger('sendSuccess', response)\n\n          this.showFeedback(response.json.message || this.options.defaultSuccessMessage)\n\n          if (this.options.removeFormOnSuccess) {\n            this.$form.parentNode.removeChild(this.$form)\n\n            if (this.options.scroller) {\n              window.setTimeout(() => {\n                this.options.scroller.toElement(this.$feedback || this.node)\n              }, 0)\n            }\n          }\n        } else {\n          this.triggerHub('form:sendError', response)\n          this.trigger('sendError', response)\n\n          let errors = this.options.findFieldErrors(response.json)\n\n          if (errors) {\n            this.displayFieldErrors(errors)\n\n            if (response.json.message) {\n              this.showFeedback(response.json.message, FEEDBACK_STATUS_ERROR)\n            }\n          } else {\n            this.showFeedback(response.json.message || this.options.defaultErrorMessage, FEEDBACK_STATUS_ERROR)\n          }\n        }\n      }).catch((err) => {\n        this.isLoading = false\n        this.node.classList.remove(this.options.classLoading)\n\n        // abort means user interrupted\n        if (err.type === 'abort') {\n          this.showFeedback(this.options.defaultAbortMessage, FEEDBACK_STATUS_WARNING)\n          throw err\n        } else {\n          this.showFeedback(this.options.defaultErrorMessage, FEEDBACK_STATUS_ERROR)\n          throw err\n        }\n      })\n    }\n  }\n\n}\n\n/**\n * Default feature options.\n */\nForm.defaultOptions = {\n  scroller: null,\n  defaultSuccessMessage: 'Nachricht wurde erfolgreich versendet!',\n  defaultErrorMessage: 'Beim Senden der Nachricht ist ein Fehler aufgetreten!',\n  defaultAbortMessage: 'Sie haben das Senden abgebrochen.',\n  classLoading: '-loading',\n  removeFormOnSuccess: true,\n  showProgress: true,\n  hideProgressOnEnd: true,\n  progressClassShow: '-show',\n  formFieldClass: 'form-field',\n  formFieldClassError: '-error',\n  formFieldMessageElement: 'div',\n  formFieldMessageClass: 'message',\n  feedbackClassSuccess: '-success',\n  feedbackClassWarning: '-warning',\n  feedbackClassError: '-error',\n  // priority: data-token-endpoint, options.tokenEndpoint, defaultOptions.tokenEndpoint\n  tokenEndpoint: null,\n  tokenFieldName: '_token',\n  findFieldErrors: function(json) {\n    return json.errors\n  },\n  getErrorField: function(error) {\n    const fieldName = error.id.replace('fields.', '')\n    let $input = this.$form.querySelector(`[name=\"fields[${fieldName}]\"]`)\n    if (!$input) return null\n    return $input.closest(`.${this.options.formFieldClass}`)\n  },\n  getFieldErrors: function(error) {\n    return error.messages\n  }\n}\n\nexport default Form\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"js-base\"\n// module id = 1\n// module chunks = 0"],"sourceRoot":""}