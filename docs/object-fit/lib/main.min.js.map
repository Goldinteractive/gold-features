{"version":3,"sources":["webpack://feature-object-fit/webpack/universalModuleDefinition","webpack://feature-object-fit/webpack/bootstrap","webpack://feature-object-fit/./node_modules/intervalometer/dist/intervalometer.es-modules.js","webpack://feature-object-fit/./node_modules/iphone-inline-video/dist/iphone-inline-video.es-modules.js","webpack://feature-object-fit/./node_modules/object-fit-videos/object-fit-videos.js","webpack://feature-object-fit/./node_modules/object-fit-images/dist/ofi.common-js.js","webpack://feature-object-fit/external \"js-base\"","webpack://feature-object-fit/./src/index.js"],"names":["root","factory","exports","module","require","define","amd","window","__WEBPACK_EXTERNAL_MODULE__3__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","intervalometer","cb","request","cancel","requestParameter","requestId","previousLoopTime","loop","now","start","stop","preventEvent","element","eventName","test","handler","e","stopImmediatePropagation","addEventListener","proxyProperty","propertyName","sourceObject","copyFirst","set","proxyEvent","dispatchEvent","Event","dispatchEventAsync","type","Promise","resolve","then","iOS8or9","document","head","style","matchMedia","matches","IIV","IIVEvent","IIVPlay","IIVPause","lastTimeupdateEvent","lastRequests","requestIndex","setTime","video","time","rememberOnly","Date","currentTime","isPlayerEnded","player","driver","duration","play","this","webkitDisplayingFullscreen","src","paused","buffered","length","load","updater","hasAudio","readyState","HAVE_ENOUGH_DATA","pause","forceEvents","ended","addPlayer","timeDiff","HAVE_FUTURE_DATA","playbackRate","networkState","NETWORK_IDLE","bind","requestAnimationFrame","cancelAnimationFrame","audio","Audio","crossOrigin","currentSrc","getAudioFromVideo","muted","wasEmpty","autoplay","indexOf","preventWithPropOrFullscreen","el","isAllowed","__webpack_exports__","opts","everywhere","iPad","ipad","navigator","userAgent","willAutoplay","overloadAPI","classList","add","restoreAutoplay","removeEventListener","platform","console","warn","videos","isEdge","testImg","Image","supportsObjectFit","supportsObjectPosition","propRegex","getStyle","$el","getComputedStyle","fontFamily","parsed","props","exec","parsePosition","fitIt","setCss","getCss","$wrap","createElement","appendChild","parentNode","replaceChild","wrapCss","height","width","boxSizing","display","overflow","key","replace","border","margin","padding","opacity","doWork","videoRatio","videoWidth","videoHeight","wrapWidth","clientWidth","wrapHeight","clientHeight","wrapRatio","newHeight","newWidth","marginLeft","marginTop","Math","round","index","querySelectorAll","initialize","obj","running","evt","CustomEvent","createEvent","initEvent","throttle","OFI","object-position","supportsOFI","supportsCurrentSrc","nativeGetAttribute","getAttribute","nativeSetAttribute","setAttribute","autoModeEnabled","setPlaceholder","img","placeholder","onImageReady","callback","naturalWidth","setTimeout","fixOne","ofi","skipTest","srcset","naturalHeight","descriptors","prop","ss","keepSrcUsable","err","picturefill","pf","_","ns","evaled","fillImg","reselect","curSrc","supported","polyfillCurrentSrc","backgroundImage","backgroundPosition","backgroundRepeat","backgroundOrigin","backgroundSize","fix","imgs","startAutoMode","getElementsByTagName","body","target","tagName","watchMQ","getOfiImageMaybe","HTMLImageElement","String","hijackAttributes","_jsBase","ObjectFit","features","Feature","_this2","_objectFit","node","_objectPosition","objectFit","objectPosition","options","defaultObjectPosition","defaultObjectFit","nodeName","toLowerCase","_objectFitVideos2","default","_iphoneInlineVideo2","unregisterAndHide","_removeInitialHide","onload","HAVE_CURRENT_DATA","waitForMediaLoaded","_objectFitImages2","_this3","parentElement","visibility","featureParent","closest","remove","classInitialHide","defaultOptions"],"mappings":"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","file":"lib/main.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"js-base\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"feature-object-fit\", [\"js-base\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"feature-object-fit\"] = factory(require(\"js-base\"));\n\telse\n\t\troot[\"feature-object-fit\"] = factory(root[\"js-base\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__3__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n","/*! npm.im/intervalometer */\nfunction intervalometer(cb, request, cancel, requestParameter) {\n\tvar requestId;\n\tvar previousLoopTime;\n\tfunction loop(now) {\n\t\t// must be requested before cb() because that might call .stop()\n\t\trequestId = request(loop, requestParameter);\n\n\t\t// called with \"ms since last call\". 0 on start()\n\t\tcb(now - (previousLoopTime || now));\n\n\t\tpreviousLoopTime = now;\n\t}\n\treturn {\n\t\tstart: function start() {\n\t\t\tif (!requestId) { // prevent double starts\n\t\t\t\tloop(0);\n\t\t\t}\n\t\t},\n\t\tstop: function stop() {\n\t\t\tcancel(requestId);\n\t\t\trequestId = null;\n\t\t\tpreviousLoopTime = 0;\n\t\t}\n\t};\n}\n\nfunction frameIntervalometer(cb) {\n\treturn intervalometer(cb, requestAnimationFrame, cancelAnimationFrame);\n}\n\nfunction timerIntervalometer(cb, delay) {\n\treturn intervalometer(cb, setTimeout, clearTimeout, delay);\n}\n\nexport { intervalometer, frameIntervalometer, timerIntervalometer };","/*! npm.im/iphone-inline-video 2.2.2 */\nimport { frameIntervalometer } from 'intervalometer';\n\nfunction preventEvent(element, eventName, test) {\n\tfunction handler(e) {\n\t\tif (!test || test(element, eventName)) {\n\t\t\te.stopImmediatePropagation();\n\t\t\t// // console.log(eventName, 'prevented on', element);\n\t\t}\n\t}\n\telement.addEventListener(eventName, handler);\n\n\t// Return handler to allow to disable the prevention. Usage:\n\t// const preventionHandler = preventEvent(el, 'click');\n\t// el.removeEventHandler('click', preventionHandler);\n\treturn handler;\n}\n\nfunction proxyProperty(object, propertyName, sourceObject, copyFirst) {\n\tfunction get() {\n\t\treturn sourceObject[propertyName];\n\t}\n\tfunction set(value) {\n\t\tsourceObject[propertyName] = value;\n\t}\n\n\tif (copyFirst) {\n\t\tset(object[propertyName]);\n\t}\n\n\tObject.defineProperty(object, propertyName, {get: get, set: set});\n}\n\nfunction proxyEvent(object, eventName, sourceObject) {\n\tsourceObject.addEventListener(eventName, function () { return object.dispatchEvent(new Event(eventName)); });\n}\n\nfunction dispatchEventAsync(element, type) {\n\tPromise.resolve().then(function () {\n\t\telement.dispatchEvent(new Event(type));\n\t});\n}\n\nvar iOS8or9 = typeof document === 'object' && 'object-fit' in document.head.style && !matchMedia('(-webkit-video-playable-inline)').matches;\n\nvar IIV = 'bfred-it:iphone-inline-video';\nvar IIVEvent = 'bfred-it:iphone-inline-video:event';\nvar IIVPlay = 'bfred-it:iphone-inline-video:nativeplay';\nvar IIVPause = 'bfred-it:iphone-inline-video:nativepause';\n\n/**\n * UTILS\n */\n\nfunction getAudioFromVideo(video) {\n\tvar audio = new Audio();\n\tproxyEvent(video, 'play', audio);\n\tproxyEvent(video, 'playing', audio);\n\tproxyEvent(video, 'pause', audio);\n\taudio.crossOrigin = video.crossOrigin;\n\n\t// 'data:' causes audio.networkState > 0\n\t// which then allows to keep <audio> in a resumable playing state\n\t// i.e. once you set a real src it will keep playing if it was if .play() was called\n\taudio.src = video.src || video.currentSrc || 'data:';\n\n\t// // if (audio.src === 'data:') {\n\t//   TODO: wait for video to be selected\n\t// // }\n\treturn audio;\n}\n\nvar lastRequests = [];\nvar requestIndex = 0;\nvar lastTimeupdateEvent;\n\nfunction setTime(video, time, rememberOnly) {\n\t// Allow one timeupdate event every 200+ ms\n\tif ((lastTimeupdateEvent || 0) + 200 < Date.now()) {\n\t\tvideo[IIVEvent] = true;\n\t\tlastTimeupdateEvent = Date.now();\n\t}\n\tif (!rememberOnly) {\n\t\tvideo.currentTime = time;\n\t}\n\tlastRequests[++requestIndex % 3] = time * 100 | 0 / 100;\n}\n\nfunction isPlayerEnded(player) {\n\treturn player.driver.currentTime >= player.video.duration;\n}\n\nfunction update(timeDiff) {\n\tvar player = this;\n\t// // console.log('update', player.video.readyState, player.video.networkState, player.driver.readyState, player.driver.networkState, player.driver.paused);\n\tif (player.video.readyState >= player.video.HAVE_FUTURE_DATA) {\n\t\tif (!player.hasAudio) {\n\t\t\tplayer.driver.currentTime = player.video.currentTime + ((timeDiff * player.video.playbackRate) / 1000);\n\t\t\tif (player.video.loop && isPlayerEnded(player)) {\n\t\t\t\tplayer.driver.currentTime = 0;\n\t\t\t}\n\t\t}\n\t\tsetTime(player.video, player.driver.currentTime);\n\t} else if (player.video.networkState === player.video.NETWORK_IDLE && player.video.buffered.length === 0) {\n\t\t// This should happen when the source is available but:\n\t\t// - it's potentially playing (.paused === false)\n\t\t// - it's not ready to play\n\t\t// - it's not loading\n\t\t// If it hasAudio, that will be loaded in the 'emptied' handler below\n\t\tplayer.video.load();\n\t\t// // console.log('Will load');\n\t}\n\n\t// // console.assert(player.video.currentTime === player.driver.currentTime, 'Video not updating!');\n\n\tif (player.video.ended) {\n\t\tdelete player.video[IIVEvent]; // Allow timeupdate event\n\t\tplayer.video.pause(true);\n\t}\n}\n\n/**\n * METHODS\n */\n\nfunction play() {\n\t// // console.log('play');\n\tvar video = this;\n\tvar player = video[IIV];\n\n\t// If it's fullscreen, use the native player\n\tif (video.webkitDisplayingFullscreen) {\n\t\tvideo[IIVPlay]();\n\t\treturn;\n\t}\n\n\tif (player.driver.src !== 'data:' && player.driver.src !== video.src) {\n\t\t// // console.log('src changed on play', video.src);\n\t\tsetTime(video, 0, true);\n\t\tplayer.driver.src = video.src;\n\t}\n\n\tif (!video.paused) {\n\t\treturn;\n\t}\n\tplayer.paused = false;\n\n\tif (video.buffered.length === 0) {\n\t\t// .load() causes the emptied event\n\t\t// the alternative is .play()+.pause() but that triggers play/pause events, even worse\n\t\t// possibly the alternative is preventing this event only once\n\t\tvideo.load();\n\t}\n\n\tplayer.driver.play();\n\tplayer.updater.start();\n\n\tif (!player.hasAudio) {\n\t\tdispatchEventAsync(video, 'play');\n\t\tif (player.video.readyState >= player.video.HAVE_ENOUGH_DATA) {\n\t\t\t// // console.log('onplay');\n\t\t\tdispatchEventAsync(video, 'playing');\n\t\t}\n\t}\n}\nfunction pause(forceEvents) {\n\t// // console.log('pause');\n\tvar video = this;\n\tvar player = video[IIV];\n\n\tplayer.driver.pause();\n\tplayer.updater.stop();\n\n\t// If it's fullscreen, the developer the native player.pause()\n\t// This is at the end of pause() because it also\n\t// needs to make sure that the simulation is paused\n\tif (video.webkitDisplayingFullscreen) {\n\t\tvideo[IIVPause]();\n\t}\n\n\tif (player.paused && !forceEvents) {\n\t\treturn;\n\t}\n\n\tplayer.paused = true;\n\tif (!player.hasAudio) {\n\t\tdispatchEventAsync(video, 'pause');\n\t}\n\n\t// Handle the 'ended' event only if it's not fullscreen\n\tif (video.ended && !video.webkitDisplayingFullscreen) {\n\t\tvideo[IIVEvent] = true;\n\t\tdispatchEventAsync(video, 'ended');\n\t}\n}\n\n/**\n * SETUP\n */\n\nfunction addPlayer(video, hasAudio) {\n\tvar player = {};\n\tvideo[IIV] = player;\n\tplayer.paused = true; // Track whether 'pause' events have been fired\n\tplayer.hasAudio = hasAudio;\n\tplayer.video = video;\n\tplayer.updater = frameIntervalometer(update.bind(player));\n\n\tif (hasAudio) {\n\t\tplayer.driver = getAudioFromVideo(video);\n\t} else {\n\t\tvideo.addEventListener('canplay', function () {\n\t\t\tif (!video.paused) {\n\t\t\t\t// // console.log('oncanplay');\n\t\t\t\tdispatchEventAsync(video, 'playing');\n\t\t\t}\n\t\t});\n\t\tplayer.driver = {\n\t\t\tsrc: video.src || video.currentSrc || 'data:',\n\t\t\tmuted: true,\n\t\t\tpaused: true,\n\t\t\tpause: function () {\n\t\t\t\tplayer.driver.paused = true;\n\t\t\t},\n\t\t\tplay: function () {\n\t\t\t\tplayer.driver.paused = false;\n\t\t\t\t// Media automatically goes to 0 if .play() is called when it's done\n\t\t\t\tif (isPlayerEnded(player)) {\n\t\t\t\t\tsetTime(video, 0);\n\t\t\t\t}\n\t\t\t},\n\t\t\tget ended() {\n\t\t\t\treturn isPlayerEnded(player);\n\t\t\t}\n\t\t};\n\t}\n\n\t// .load() causes the emptied event\n\tvideo.addEventListener('emptied', function () {\n\t\t// // console.log('driver src is', player.driver.src);\n\t\tvar wasEmpty = !player.driver.src || player.driver.src === 'data:';\n\t\tif (player.driver.src && player.driver.src !== video.src) {\n\t\t\t// // console.log('src changed to', video.src);\n\t\t\tsetTime(video, 0, true);\n\t\t\tplayer.driver.src = video.src;\n\t\t\t// Playing videos will only keep playing if no src was present when .play()’ed\n\t\t\tif (wasEmpty || (!hasAudio && video.autoplay)) {\n\t\t\t\tplayer.driver.play();\n\t\t\t} else {\n\t\t\t\tplayer.updater.stop();\n\t\t\t}\n\t\t}\n\t}, false);\n\n\t// Stop programmatic player when OS takes over\n\tvideo.addEventListener('webkitbeginfullscreen', function () {\n\t\tif (!video.paused) {\n\t\t\t// Make sure that the <audio> and the syncer/updater are stopped\n\t\t\tvideo.pause();\n\n\t\t\t// Play video natively\n\t\t\tvideo[IIVPlay]();\n\t\t} else if (hasAudio && player.driver.buffered.length === 0) {\n\t\t\t// If the first play is native,\n\t\t\t// the <audio> needs to be buffered manually\n\t\t\t// so when the fullscreen ends, it can be set to the same current time\n\t\t\tplayer.driver.load();\n\t\t}\n\t});\n\tif (hasAudio) {\n\t\tvideo.addEventListener('webkitendfullscreen', function () {\n\t\t\t// Sync audio to new video position\n\t\t\tplayer.driver.currentTime = video.currentTime;\n\t\t\t// // console.assert(player.driver.currentTime === video.currentTime, 'Audio not synced');\n\t\t});\n\n\t\t// Allow seeking\n\t\tvideo.addEventListener('seeking', function () {\n\t\t\tif (lastRequests.indexOf(video.currentTime * 100 | 0 / 100) < 0) {\n\t\t\t\t// // console.log('User-requested seeking');\n\t\t\t\tplayer.driver.currentTime = video.currentTime;\n\t\t\t}\n\t\t});\n\t}\n}\n\nfunction preventWithPropOrFullscreen(el) {\n\tvar isAllowed = el[IIVEvent];\n\tdelete el[IIVEvent];\n\treturn !el.webkitDisplayingFullscreen && !isAllowed;\n}\n\nfunction overloadAPI(video) {\n\tvar player = video[IIV];\n\tvideo[IIVPlay] = video.play;\n\tvideo[IIVPause] = video.pause;\n\tvideo.play = play;\n\tvideo.pause = pause;\n\tproxyProperty(video, 'paused', player.driver);\n\tproxyProperty(video, 'muted', player.driver, true);\n\tproxyProperty(video, 'playbackRate', player.driver, true);\n\tproxyProperty(video, 'ended', player.driver);\n\tproxyProperty(video, 'loop', player.driver, true);\n\n\t// IIV works by seeking 60 times per second.\n\t// These events are now useless.\n\tpreventEvent(video, 'seeking', function (el) { return !el.webkitDisplayingFullscreen; });\n\tpreventEvent(video, 'seeked', function (el) { return !el.webkitDisplayingFullscreen; });\n\n\t// Limit timeupdate events\n\tpreventEvent(video, 'timeupdate', preventWithPropOrFullscreen);\n\n\t// Prevent occasional native ended events\n\tpreventEvent(video, 'ended', preventWithPropOrFullscreen);\n}\n\nfunction enableInlineVideo(video, opts) {\n\tif ( opts === void 0 ) opts = {};\n\n\t// Stop if already enabled\n\tif (video[IIV]) {\n\t\treturn;\n\t}\n\n\t// Allow the user to skip detection\n\tif (!opts.everywhere) {\n\t\t// Only iOS8 and 9 are supported\n\t\tif (!iOS8or9) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Stop if it's not an allowed device\n\t\tif (!(opts.iPad || opts.ipad ? /iPhone|iPod|iPad/ : /iPhone|iPod/).test(navigator.userAgent)) {\n\t\t\treturn;\n\t\t}\n\t}\n\n\t// Try to pause\n\tvideo.pause();\n\n\t// Prevent autoplay.\n\t// An non-started autoplaying video can't be .pause()'d\n\tvar willAutoplay = video.autoplay;\n\tvideo.autoplay = false;\n\n\taddPlayer(video, !video.muted);\n\toverloadAPI(video);\n\tvideo.classList.add('IIV');\n\n\t// Autoplay\n\tif (video.muted && willAutoplay) {\n\t\tvideo.play();\n\t\tvideo.addEventListener('playing', function restoreAutoplay() {\n\t\t\tvideo.autoplay = true;\n\t\t\tvideo.removeEventListener('playing', restoreAutoplay);\n\t\t});\n\t}\n\n\tif (!/iPhone|iPod|iPad/.test(navigator.platform)) {\n\t\tconsole.warn('iphone-inline-video is not guaranteed to work in emulated environments');\n\t}\n}\n\nexport default enableInlineVideo;\n","/**\n * Object Fit Videos\n * Polyfill for object-fit and object-position CSS properties on video elements\n * Covers IE9, IE10, IE11, Edge, Safari <10\n *\n * Usage\n * In your CSS, add a special font-family tag for IE/Edge\n * video {\n *   object-fit: cover;\n *   font-family: 'object-fit: cover;';\n * }\n *\n * Before the closing body tag, or whenever the DOM is ready,\n * make the JavaScript call\n * objectFitVideos();\n *\n * All video elements with the special CSS property will be targeted\n *\n * @license  MIT (https://opensource.org/licenses/MIT)\n * @author   Todd Miller <todd.miller@tricomb2b.com>\n * @version  1.0.2\n * @changelog\n * 2016-08-19 - Adds object-position support.\n * 2016-08-19 - Add throttle function for more performant resize events\n * 2016-08-19 - Initial release with object-fit support, and\n *              object-position default 'center'\n * 2016-10-14 - No longer relies on window load event, instead requires a specific\n *              function call to initialize the videos for object fit and position.\n * 2016-11-28 - Support CommonJS environment, courtesy of @msorensson\n * 2016-12-05 - Refactors the throttling function to support IE\n * 2017-09-26 - Fix an issue with autplay not working on polyfilled videos\n *            - Adds the capability to specify elements to polyfill,\n *              instead of just checking every video element for the\n *              CSS property. Slight performance gain in most usecases,\n *              and a bigger gain in a few usecases.\n * 2017-10-24 - Add user agent check to enable polyfill for all Edge browsers.\n *              object-fit is supported on Edge >= 16, but currently just for images.\n */\nvar objectFitVideos = function (videos) {\n  'use strict';\n\n  var isEdge = navigator.userAgent.indexOf('Edge/') >= 0;\n\n  var testImg                = new Image(),\n      supportsObjectFit      = 'object-fit' in testImg.style && !isEdge,\n      supportsObjectPosition = 'object-position' in testImg.style && !isEdge,\n      propRegex              = /(object-fit|object-position)\\s*:\\s*([-\\w\\s%]+)/g;\n\n  if (!supportsObjectFit || !supportsObjectPosition) {\n    initialize(videos);\n    throttle('resize', 'optimizedResize');\n  }\n\n  /**\n   * Parse the style and look for the special font-family tag\n   * @param  {object} $el The element to parse\n   * @return {object}     The font-family properties we're interested in\n   */\n  function getStyle ($el) {\n    var style  = getComputedStyle($el).fontFamily,\n        parsed = null,\n        props  = {};\n\n      while ((parsed = propRegex.exec(style)) !== null) {\n        props[parsed[1]] = parsed[2];\n      }\n\n      if (props['object-position'])\n        return parsePosition(props);\n\n      return props;\n  }\n\n  /**\n   * Initialize all the relevant video elements and get them fitted\n   */\n  function initialize (videos) {\n    var index = -1;\n\n    if (!videos) {\n      // if no videos given, query all video elements\n      videos = document.querySelectorAll('video');\n    } else if (!('length' in videos)) {\n      // convert to an array for proper looping if an array or NodeList\n      // was not given\n      videos = [videos];\n    }\n\n    while (videos[++index]) {\n      var style = getStyle(videos[index]);\n\n      // only do work if the property is on the element\n      if (style['object-fit'] || style['object-position']) {\n        // set the default values\n        style['object-fit'] = style['object-fit'] || 'fill';\n        fitIt(videos[index], style);\n      }\n    }\n  }\n\n  /**\n   * Object Fit\n   * @param  {object} $el Element to fit\n   * @return {object}     The element's relevant properties\n   */\n  function fitIt ($el, style) {\n    // fill is the default behavior, no action is necessary\n    if (style['object-fit'] === 'fill')\n      return;\n\n    // convenience style properties on the source element\n    var setCss = $el.style,\n        getCss = window.getComputedStyle($el);\n\n    // create and insert a wrapper element\n    var $wrap = document.createElement('object-fit');\n    $wrap.appendChild($el.parentNode.replaceChild($wrap, $el));\n\n    // style the wrapper element to mostly match the source element\n    var wrapCss = {\n      height:    '100%',\n      width:     '100%',\n      boxSizing: 'content-box',\n      display:   'inline-block',\n      overflow:  'hidden'\n    };\n\n    'backgroundColor backgroundImage borderColor borderStyle borderWidth bottom fontSize lineHeight left opacity margin position right top visibility'.replace(/\\w+/g, function (key) {\n      wrapCss[key] = getCss[key];\n    });\n\n    for (var key in wrapCss)\n      $wrap.style[key] = wrapCss[key];\n\n    // give the source element some saner styles\n    setCss.border  = setCss.margin = setCss.padding = 0;\n    setCss.display = 'block';\n    setCss.opacity = 1;\n\n    // set up the event handlers\n    $el.addEventListener('loadedmetadata', doWork);\n    window.addEventListener('optimizedResize', doWork);\n\n    // we may have missed the loadedmetadata event, so if the video has loaded\n    // enough data, just drop the event listener and execute\n    if ($el.readyState >= 1) {\n      $el.removeEventListener('loadedmetadata', doWork);\n      doWork();\n    }\n\n    /**\n     * Do the actual sizing. Math.\n     * @methodOf fitIt\n     */\n    function doWork () {\n      // the actual size and ratio of the video\n      // we do this here, even though it doesn't change, because\n      // at this point we can be sure the metadata has loaded\n      var videoWidth  = $el.videoWidth,\n          videoHeight = $el.videoHeight,\n          videoRatio  = videoWidth / videoHeight;\n\n      var wrapWidth  = $wrap.clientWidth,\n          wrapHeight = $wrap.clientHeight,\n          wrapRatio  = wrapWidth / wrapHeight;\n\n      var newHeight = 0,\n          newWidth  = 0;\n      setCss.marginLeft = setCss.marginTop = 0;\n\n      // basically we do the opposite action for contain and cover,\n      // depending on whether the video aspect ratio is less than or\n      // greater than the wrapper's aspect ratio\n      if (videoRatio < wrapRatio ?\n          style['object-fit'] === 'contain' : style['object-fit'] === 'cover') {\n        newHeight = wrapHeight * videoRatio;\n        newWidth  = wrapWidth / videoRatio;\n\n        setCss.width  = Math.round(newHeight) + 'px';\n        setCss.height = wrapHeight + 'px';\n\n        if (style['object-position-x'] === 'left')\n          setCss.marginLeft = 0;\n        else if (style['object-position-x'] === 'right')\n          setCss.marginLeft = Math.round(wrapWidth - newHeight) + 'px';\n        else\n          setCss.marginLeft = Math.round((wrapWidth - newHeight) / 2) + 'px';\n      } else {\n        newWidth = wrapWidth / videoRatio;\n\n        setCss.width     = wrapWidth + 'px';\n        setCss.height    = Math.round(newWidth) + 'px';\n\n        if (style['object-position-y'] === 'top')\n          setCss.marginTop = 0;\n        else if (style['object-position-y'] === 'bottom')\n          setCss.marginTop = Math.round(wrapHeight - newWidth) + 'px';\n        else\n          setCss.marginTop = Math.round((wrapHeight - newWidth) / 2) + 'px';\n      }\n\n      // play the video if autoplay is set\n      if ($el.autoplay)\n        $el.play();\n    }\n  }\n\n  /**\n   * Split the object-position property into x and y position properties\n   * @param  {object} style Relevant element styles\n   * @return {object}       The style object with the added x and y props\n   */\n  function parsePosition (style) {\n    if (~style['object-position'].indexOf('left'))\n      style['object-position-x'] = 'left';\n    else if (~style['object-position'].indexOf('right'))\n      style['object-position-x'] = 'right';\n    else\n      style['object-position-x'] = 'center';\n\n    if (~style['object-position'].indexOf('top'))\n      style['object-position-y'] = 'top';\n    else if (~style['object-position'].indexOf('bottom'))\n      style['object-position-y'] = 'bottom';\n    else\n      style['object-position-y'] = 'center';\n\n    return style;\n  }\n\n  /**\n   * Throttle an event with RequestAnimationFrame API for better performance\n   * @param  {string} type The event to throttle\n   * @param  {string} name Custom event name to listen for\n   * @param  {object} obj  Optional object to attach the event to\n   */\n  function throttle (type, name, obj) {\n    obj = obj || window;\n    var running = false,\n        evt     = null;\n\n    // IE does not support the CustomEvent constructor\n    // so if that fails do it the old way\n    try {\n      evt = new CustomEvent(name);\n    } catch (e) {\n      evt = document.createEvent('Event');\n      evt.initEvent(name, true, true);\n    }\n\n    var func = function () {\n      if (running) return;\n\n      running = true;\n      requestAnimationFrame(function () {\n        obj.dispatchEvent(evt);\n        running = false;\n      });\n    };\n\n    obj.addEventListener(type, func);\n  }\n};\n\nif (typeof module !== 'undefined' && typeof module.exports !== 'undefined')\n  module.exports = objectFitVideos;\n","/*! npm.im/object-fit-images 3.2.3 */\n'use strict';\n\nvar OFI = 'bfred-it:object-fit-images';\nvar propRegex = /(object-fit|object-position)\\s*:\\s*([-\\w\\s%]+)/g;\nvar testImg = typeof Image === 'undefined' ? {style: {'object-position': 1}} : new Image();\nvar supportsObjectFit = 'object-fit' in testImg.style;\nvar supportsObjectPosition = 'object-position' in testImg.style;\nvar supportsOFI = 'background-size' in testImg.style;\nvar supportsCurrentSrc = typeof testImg.currentSrc === 'string';\nvar nativeGetAttribute = testImg.getAttribute;\nvar nativeSetAttribute = testImg.setAttribute;\nvar autoModeEnabled = false;\n\nfunction createPlaceholder(w, h) {\n\treturn (\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='\" + w + \"' height='\" + h + \"'%3E%3C/svg%3E\");\n}\n\nfunction polyfillCurrentSrc(el) {\n\tif (el.srcset && !supportsCurrentSrc && window.picturefill) {\n\t\tvar pf = window.picturefill._;\n\t\t// parse srcset with picturefill where currentSrc isn't available\n\t\tif (!el[pf.ns] || !el[pf.ns].evaled) {\n\t\t\t// force synchronous srcset parsing\n\t\t\tpf.fillImg(el, {reselect: true});\n\t\t}\n\n\t\tif (!el[pf.ns].curSrc) {\n\t\t\t// force picturefill to parse srcset\n\t\t\tel[pf.ns].supported = false;\n\t\t\tpf.fillImg(el, {reselect: true});\n\t\t}\n\n\t\t// retrieve parsed currentSrc, if any\n\t\tel.currentSrc = el[pf.ns].curSrc || el.src;\n\t}\n}\n\nfunction getStyle(el) {\n\tvar style = getComputedStyle(el).fontFamily;\n\tvar parsed;\n\tvar props = {};\n\twhile ((parsed = propRegex.exec(style)) !== null) {\n\t\tprops[parsed[1]] = parsed[2];\n\t}\n\treturn props;\n}\n\nfunction setPlaceholder(img, width, height) {\n\t// Default: fill width, no height\n\tvar placeholder = createPlaceholder(width || 1, height || 0);\n\n\t// Only set placeholder if it's different\n\tif (nativeGetAttribute.call(img, 'src') !== placeholder) {\n\t\tnativeSetAttribute.call(img, 'src', placeholder);\n\t}\n}\n\nfunction onImageReady(img, callback) {\n\t// naturalWidth is only available when the image headers are loaded,\n\t// this loop will poll it every 100ms.\n\tif (img.naturalWidth) {\n\t\tcallback(img);\n\t} else {\n\t\tsetTimeout(onImageReady, 100, img, callback);\n\t}\n}\n\nfunction fixOne(el) {\n\tvar style = getStyle(el);\n\tvar ofi = el[OFI];\n\tstyle['object-fit'] = style['object-fit'] || 'fill'; // default value\n\n\t// Avoid running where unnecessary, unless OFI had already done its deed\n\tif (!ofi.img) {\n\t\t// fill is the default behavior so no action is necessary\n\t\tif (style['object-fit'] === 'fill') {\n\t\t\treturn;\n\t\t}\n\n\t\t// Where object-fit is supported and object-position isn't (Safari < 10)\n\t\tif (\n\t\t\t!ofi.skipTest && // unless user wants to apply regardless of browser support\n\t\t\tsupportsObjectFit && // if browser already supports object-fit\n\t\t\t!style['object-position'] // unless object-position is used\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t}\n\n\t// keep a clone in memory while resetting the original to a blank\n\tif (!ofi.img) {\n\t\tofi.img = new Image(el.width, el.height);\n\t\tofi.img.srcset = nativeGetAttribute.call(el, \"data-ofi-srcset\") || el.srcset;\n\t\tofi.img.src = nativeGetAttribute.call(el, \"data-ofi-src\") || el.src;\n\n\t\t// preserve for any future cloneNode calls\n\t\t// https://github.com/bfred-it/object-fit-images/issues/53\n\t\tnativeSetAttribute.call(el, \"data-ofi-src\", el.src);\n\t\tif (el.srcset) {\n\t\t\tnativeSetAttribute.call(el, \"data-ofi-srcset\", el.srcset);\n\t\t}\n\n\t\tsetPlaceholder(el, el.naturalWidth || el.width, el.naturalHeight || el.height);\n\n\t\t// remove srcset because it overrides src\n\t\tif (el.srcset) {\n\t\t\tel.srcset = '';\n\t\t}\n\t\ttry {\n\t\t\tkeepSrcUsable(el);\n\t\t} catch (err) {\n\t\t\tif (window.console) {\n\t\t\t\tconsole.warn('https://bit.ly/ofi-old-browser');\n\t\t\t}\n\t\t}\n\t}\n\n\tpolyfillCurrentSrc(ofi.img);\n\n\tel.style.backgroundImage = \"url(\\\"\" + ((ofi.img.currentSrc || ofi.img.src).replace(/\"/g, '\\\\\"')) + \"\\\")\";\n\tel.style.backgroundPosition = style['object-position'] || 'center';\n\tel.style.backgroundRepeat = 'no-repeat';\n\tel.style.backgroundOrigin = 'content-box';\n\n\tif (/scale-down/.test(style['object-fit'])) {\n\t\tonImageReady(ofi.img, function () {\n\t\t\tif (ofi.img.naturalWidth > el.width || ofi.img.naturalHeight > el.height) {\n\t\t\t\tel.style.backgroundSize = 'contain';\n\t\t\t} else {\n\t\t\t\tel.style.backgroundSize = 'auto';\n\t\t\t}\n\t\t});\n\t} else {\n\t\tel.style.backgroundSize = style['object-fit'].replace('none', 'auto').replace('fill', '100% 100%');\n\t}\n\n\tonImageReady(ofi.img, function (img) {\n\t\tsetPlaceholder(el, img.naturalWidth, img.naturalHeight);\n\t});\n}\n\nfunction keepSrcUsable(el) {\n\tvar descriptors = {\n\t\tget: function get(prop) {\n\t\t\treturn el[OFI].img[prop ? prop : 'src'];\n\t\t},\n\t\tset: function set(value, prop) {\n\t\t\tel[OFI].img[prop ? prop : 'src'] = value;\n\t\t\tnativeSetAttribute.call(el, (\"data-ofi-\" + prop), value); // preserve for any future cloneNode\n\t\t\tfixOne(el);\n\t\t\treturn value;\n\t\t}\n\t};\n\tObject.defineProperty(el, 'src', descriptors);\n\tObject.defineProperty(el, 'currentSrc', {\n\t\tget: function () { return descriptors.get('currentSrc'); }\n\t});\n\tObject.defineProperty(el, 'srcset', {\n\t\tget: function () { return descriptors.get('srcset'); },\n\t\tset: function (ss) { return descriptors.set(ss, 'srcset'); }\n\t});\n}\n\nfunction hijackAttributes() {\n\tfunction getOfiImageMaybe(el, name) {\n\t\treturn el[OFI] && el[OFI].img && (name === 'src' || name === 'srcset') ? el[OFI].img : el;\n\t}\n\tif (!supportsObjectPosition) {\n\t\tHTMLImageElement.prototype.getAttribute = function (name) {\n\t\t\treturn nativeGetAttribute.call(getOfiImageMaybe(this, name), name);\n\t\t};\n\n\t\tHTMLImageElement.prototype.setAttribute = function (name, value) {\n\t\t\treturn nativeSetAttribute.call(getOfiImageMaybe(this, name), name, String(value));\n\t\t};\n\t}\n}\n\nfunction fix(imgs, opts) {\n\tvar startAutoMode = !autoModeEnabled && !imgs;\n\topts = opts || {};\n\timgs = imgs || 'img';\n\n\tif ((supportsObjectPosition && !opts.skipTest) || !supportsOFI) {\n\t\treturn false;\n\t}\n\n\t// use imgs as a selector or just select all images\n\tif (imgs === 'img') {\n\t\timgs = document.getElementsByTagName('img');\n\t} else if (typeof imgs === 'string') {\n\t\timgs = document.querySelectorAll(imgs);\n\t} else if (!('length' in imgs)) {\n\t\timgs = [imgs];\n\t}\n\n\t// apply fix to all\n\tfor (var i = 0; i < imgs.length; i++) {\n\t\timgs[i][OFI] = imgs[i][OFI] || {\n\t\t\tskipTest: opts.skipTest\n\t\t};\n\t\tfixOne(imgs[i]);\n\t}\n\n\tif (startAutoMode) {\n\t\tdocument.body.addEventListener('load', function (e) {\n\t\t\tif (e.target.tagName === 'IMG') {\n\t\t\t\tfix(e.target, {\n\t\t\t\t\tskipTest: opts.skipTest\n\t\t\t\t});\n\t\t\t}\n\t\t}, true);\n\t\tautoModeEnabled = true;\n\t\timgs = 'img'; // reset to a generic selector for watchMQ\n\t}\n\n\t// if requested, watch media queries for object-fit change\n\tif (opts.watchMQ) {\n\t\twindow.addEventListener('resize', fix.bind(null, imgs, {\n\t\t\tskipTest: opts.skipTest\n\t\t}));\n\t}\n}\n\nfix.supportsObjectFit = supportsObjectFit;\nfix.supportsObjectPosition = supportsObjectPosition;\n\nhijackAttributes();\n\nmodule.exports = fix;\n","module.exports = __WEBPACK_EXTERNAL_MODULE__3__;","import { features } from '@goldinteractive/js-base'\n\nimport objectFitImage from 'object-fit-images'\nimport objectFitVideo from 'object-fit-videos'\nimport enableInlineVideo from 'iphone-inline-video'\n\nconst CLASS_FEATURE = '.ft-fit-bg'\nconst NETWORK_IDLE = 1\n\n/**\n * Object fit feature class.\n */\nclass ObjectFit extends features.Feature {\n\n  init() {\n    this._objectFit = this.node.getAttribute('data-object-fit')\n    this._objectPosition = this.node.getAttribute('data-object-position')\n\n    if (this._objectFit && this._objectPosition) {\n      this.node.style.objectFit = this._objectFit\n      this.node.style.objectPosition = this._objectPosition\n      this.node.style.fontFamily = `\"object-fit: ${this._objectFit}; object-position: ${this._objectPosition}\"`\n    } else if (this._objectFit) {\n      this.node.style.objectFit = this._objectFit\n      this.node.style.fontFamily = `\"object-fit: ${this._objectFit}; object-position: ${this.options.defaultObjectPosition}\"`\n    } else  if (this._objectPosition) {\n      this.node.style.objectPosition = this._objectPosition\n      this.node.style.fontFamily = `\"object-fit: ${this.options.defaultObjectFit}; object-position: ${this._objectPosition}\"`\n    }\n\n    if (this.node.nodeName.toLowerCase() == 'video') {\n      objectFitVideo(this.node)\n      enableInlineVideo(this.node, {\n          iPad: this.options.iPad\n      })\n\n      const unregisterAndHide = () => {\n        this._removeInitialHide()\n        this.removeEventListener(this.node, 'loadeddata', onload)\n        this.removeEventListener(this.node, 'loadedmetadata', onload)\n      }\n\n      const autoplay = () => {\n        if (this.node.autoplay) {\n          this.node.play()\n        }\n      }\n\n      let onload = () => {\n        if (this.node.readyState >= this.node.HAVE_CURRENT_DATA) {\n          unregisterAndHide()\n          autoplay()\n        } else if (this.node.networkState === NETWORK_IDLE) {\n          // if network is idle, which means, that nothing is being requested, the content is \"ready\"\n          unregisterAndHide()\n        }\n      }\n\n      if (this.node.readyState >= this.node.HAVE_CURRENT_DATA || !this.options.waitForMediaLoaded) {\n        this._removeInitialHide()\n        autoplay()\n      } else {\n        this.addEventListener(this.node, 'loadeddata', onload)\n        this.addEventListener(this.node, 'loadedmetadata', onload)\n      }\n    } else {\n      objectFitImage(this.node, {\n        watchMQ: this.options.watchMQ\n      })\n\n      if (this.node.naturalWidth || !this.options.waitForMediaLoaded) {\n        this._removeInitialHide()\n      } else {\n        let onload = () => {\n          this.removeEventListener(this.node, 'load', onload)\n          this._removeInitialHide()\n        }\n\n        this.addEventListener(this.node, 'load', onload)\n      }\n    }\n  }\n\n  _removeInitialHide() {\n    window.setTimeout(() => {\n      if (this.node.parentElement.tagName.toLowerCase() === 'object-fit') {\n        this.node.parentElement.style.visibility = 'inherit'\n        this.node.parentElement.style.opacity = 'inherit'\n      }\n\n      let featureParent = this.node.closest(CLASS_FEATURE)\n\n      if (featureParent) {\n        featureParent.classList.remove(this.options.classInitialHide)\n      }\n    }, 0)\n  }\n\n}\n\n/**\n * Default feature options (also used to initialize object-fit-images and iphone-inline-video library).\n *\n * @see https://github.com/bfred-it/object-fit-images\n *\n * @type {Object}\n * @property {Boolean} watchMQ=false\n *   This enables the automatic re-fix of the selected images when the window resizes.\n *   You only need it in some cases\n * @property {Boolean} waitForMediaLoaded=true\n *   Enable to remove initialHideClass after media has been loaded.\n *   Set false to wait only for polyfill initialization.\n * @property {String} defaultObjectFit='cover'\n *   Default object fit used when only `data-object-position` is defined\n * @property {String} defaultObjectPosition='center center'\n *   Default object position used when only `data-object-fit` is defined\n */\nObjectFit.defaultOptions = {\n  iPad: true,\n  watchMQ: false,\n  waitForMediaLoaded: true,\n  defaultObjectFit: 'cover',\n  defaultObjectPosition: 'center center',\n  classInitialHide: '-initial-hide'\n}\n\nexport default ObjectFit\n"],"sourceRoot":""}