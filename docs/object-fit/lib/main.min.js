!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("js-base")):"function"==typeof define&&define.amd?define("feature-object-fit",["js-base"],e):"object"==typeof exports?exports["feature-object-fit"]=e(require("js-base")):t["feature-object-fit"]=e(t["js-base"])}("undefined"!=typeof self?self:this,function(t){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(1),r=c(i(2)),s=c(i(3)),a=c(i(4));function c(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.features.Feature),n(e,[{key:"init",value:function(){var t=this;if(this._objectFit=this.node.getAttribute("data-object-fit"),this._objectPosition=this.node.getAttribute("data-object-position"),this._objectFit&&this._objectPosition?(this.node.style.objectFit=this._objectFit,this.node.style.objectPosition=this._objectPosition,this.node.style.fontFamily='"object-fit: '+this._objectFit+"; object-position: "+this._objectPosition+'"'):this._objectFit?(this.node.style.objectFit=this._objectFit,this.node.style.fontFamily='"object-fit: '+this._objectFit+"; object-position: "+this.options.defaultObjectPosition+'"'):this._objectPosition&&(this.node.style.objectPosition=this._objectPosition,this.node.style.fontFamily='"object-fit: '+this.options.defaultObjectFit+"; object-position: "+this._objectPosition+'"'),"video"==this.node.nodeName.toLowerCase()){(0,s.default)(this.node),(0,a.default)(this.node,{iPad:this.options.iPad});this.node.readyState>=this.node.HAVE_CURRENT_DATA||!this.options.waitForMediaLoaded?(this._removeInitialHide(),this.node.autoplay&&this.node.play()):this.addEventListener(this.node,"loadeddata",function e(){t.node.readyState>=t.node.HAVE_CURRENT_DATA&&(t.removeEventListener(t.node,"loadeddata",e),t._removeInitialHide(),t.node.autoplay&&t.node.play())})}else if((0,r.default)(this.node,{watchMQ:this.options.watchMQ}),this.node.naturalWidth||!this.options.waitForMediaLoaded)this._removeInitialHide();else{this.addEventListener(this.node,"load",function e(){t.removeEventListener(t.node,"load",e),t._removeInitialHide()})}}},{key:"_removeInitialHide",value:function(){var t=this;window.setTimeout(function(){"object-fit"===t.node.parentElement.tagName.toLowerCase()&&(t.node.parentElement.style.visibility="inherit",t.node.parentElement.style.opacity="inherit");var e=t.node.closest(".ft-fit-bg");e&&e.classList.remove(t.options.classInitialHide)},0)}}]),e}();d.defaultOptions={iPad:!0,watchMQ:!1,waitForMediaLoaded:!0,defaultObjectFit:"cover",defaultObjectPosition:"center center",classInitialHide:"-initial-hide"},e.default=d},function(e,i){e.exports=t},function(t,e,i){"use strict";var n="bfred-it:object-fit-images",o=/(object-fit|object-position)\s*:\s*([-\w\s%]+)/g,r="undefined"==typeof Image?{style:{"object-position":1}}:new Image,s="object-fit"in r.style,a="object-position"in r.style,c="background-size"in r.style,d="string"==typeof r.currentSrc,u=r.getAttribute,l=r.setAttribute,f=!1;function p(t,e,i){var n="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='"+(e||1)+"' height='"+(i||0)+"'%3E%3C/svg%3E";u.call(t,"src")!==n&&l.call(t,"src",n)}function h(t,e){t.naturalWidth?e(t):setTimeout(h,100,t,e)}function b(t){var e=function(t){for(var e,i=getComputedStyle(t).fontFamily,n={};null!==(e=o.exec(i));)n[e[1]]=e[2];return n}(t),i=t[n];if(e["object-fit"]=e["object-fit"]||"fill",!i.img){if("fill"===e["object-fit"])return;if(!i.skipTest&&s&&!e["object-position"])return}if(!i.img){i.img=new Image(t.width,t.height),i.img.srcset=u.call(t,"data-ofi-srcset")||t.srcset,i.img.src=u.call(t,"data-ofi-src")||t.src,l.call(t,"data-ofi-src",t.src),t.srcset&&l.call(t,"data-ofi-srcset",t.srcset),p(t,t.naturalWidth||t.width,t.naturalHeight||t.height),t.srcset&&(t.srcset="");try{!function(t){var e={get:function(e){return t[n].img[e||"src"]},set:function(e,i){return t[n].img[i||"src"]=e,l.call(t,"data-ofi-"+i,e),b(t),e}};Object.defineProperty(t,"src",e),Object.defineProperty(t,"currentSrc",{get:function(){return e.get("currentSrc")}}),Object.defineProperty(t,"srcset",{get:function(){return e.get("srcset")},set:function(t){return e.set(t,"srcset")}})}(t)}catch(t){window.console&&console.warn("https://bit.ly/ofi-old-browser")}}!function(t){if(t.srcset&&!d&&window.picturefill){var e=window.picturefill._;t[e.ns]&&t[e.ns].evaled||e.fillImg(t,{reselect:!0}),t[e.ns].curSrc||(t[e.ns].supported=!1,e.fillImg(t,{reselect:!0})),t.currentSrc=t[e.ns].curSrc||t.src}}(i.img),t.style.backgroundImage='url("'+(i.img.currentSrc||i.img.src).replace(/"/g,'\\"')+'")',t.style.backgroundPosition=e["object-position"]||"center",t.style.backgroundRepeat="no-repeat",t.style.backgroundOrigin="content-box",/scale-down/.test(e["object-fit"])?h(i.img,function(){i.img.naturalWidth>t.width||i.img.naturalHeight>t.height?t.style.backgroundSize="contain":t.style.backgroundSize="auto"}):t.style.backgroundSize=e["object-fit"].replace("none","auto").replace("fill","100% 100%"),h(i.img,function(e){p(t,e.naturalWidth,e.naturalHeight)})}function v(t,e){var i=!f&&!t;if(e=e||{},t=t||"img",a&&!e.skipTest||!c)return!1;"img"===t?t=document.getElementsByTagName("img"):"string"==typeof t?t=document.querySelectorAll(t):"length"in t||(t=[t]);for(var o=0;o<t.length;o++)t[o][n]=t[o][n]||{skipTest:e.skipTest},b(t[o]);i&&(document.body.addEventListener("load",function(t){"IMG"===t.target.tagName&&v(t.target,{skipTest:e.skipTest})},!0),f=!0,t="img"),e.watchMQ&&window.addEventListener("resize",v.bind(null,t,{skipTest:e.skipTest}))}v.supportsObjectFit=s,v.supportsObjectPosition=a,function(){function t(t,e){return t[n]&&t[n].img&&("src"===e||"srcset"===e)?t[n].img:t}a||(HTMLImageElement.prototype.getAttribute=function(e){return u.call(t(this,e),e)},HTMLImageElement.prototype.setAttribute=function(e,i){return l.call(t(this,e),e,String(i))})}(),t.exports=v},function(t,e){void 0!==t&&void 0!==t.exports&&(t.exports=function(t){"use strict";var e=navigator.userAgent.indexOf("Edge/")>=0,i=new Image,n="object-fit"in i.style&&!e,o="object-position"in i.style&&!e,r=/(object-fit|object-position)\s*:\s*([-\w\s%]+)/g;function s(t){for(var e=getComputedStyle(t).fontFamily,i=null,n={};null!==(i=r.exec(e));)n[i[1]]=i[2];return n["object-position"]?function(t){return~t["object-position"].indexOf("left")?t["object-position-x"]="left":~t["object-position"].indexOf("right")?t["object-position-x"]="right":t["object-position-x"]="center",~t["object-position"].indexOf("top")?t["object-position-y"]="top":~t["object-position"].indexOf("bottom")?t["object-position-y"]="bottom":t["object-position-y"]="center",t}(n):n}function a(t,e){if("fill"!==e["object-fit"]){var i=t.style,n=window.getComputedStyle(t),o=document.createElement("object-fit");o.appendChild(t.parentNode.replaceChild(o,t));var r={height:"100%",width:"100%",boxSizing:"content-box",display:"inline-block",overflow:"hidden"};for(var s in"backgroundColor backgroundImage borderColor borderStyle borderWidth bottom fontSize lineHeight left opacity margin position right top visibility".replace(/\w+/g,function(t){r[t]=n[t]}),r)o.style[s]=r[s];i.border=i.margin=i.padding=0,i.display="block",i.opacity=1,t.addEventListener("loadedmetadata",a),window.addEventListener("optimizedResize",a),t.readyState>=1&&(t.removeEventListener("loadedmetadata",a),a())}function a(){var n=t.videoWidth/t.videoHeight,r=o.clientWidth,s=o.clientHeight,a=r/s,c=0,d=0;i.marginLeft=i.marginTop=0,(n<a?"contain"===e["object-fit"]:"cover"===e["object-fit"])?(c=s*n,d=r/n,i.width=Math.round(c)+"px",i.height=s+"px","left"===e["object-position-x"]?i.marginLeft=0:"right"===e["object-position-x"]?i.marginLeft=Math.round(r-c)+"px":i.marginLeft=Math.round((r-c)/2)+"px"):(d=r/n,i.width=r+"px",i.height=Math.round(d)+"px","top"===e["object-position-y"]?i.marginTop=0:"bottom"===e["object-position-y"]?i.marginTop=Math.round(s-d)+"px":i.marginTop=Math.round((s-d)/2)+"px"),t.autoplay&&t.play()}}n&&o||(function(t){var e=-1;t?"length"in t||(t=[t]):t=document.querySelectorAll("video");for(;t[++e];){var i=s(t[e]);(i["object-fit"]||i["object-position"])&&(i["object-fit"]=i["object-fit"]||"fill",a(t[e],i))}}(t),function(t,e,i){i=i||window;var n=!1,o=null;try{o=new CustomEvent(e)}catch(t){(o=document.createEvent("Event")).initEvent(e,!0,!0)}i.addEventListener(t,function(){n||(n=!0,requestAnimationFrame(function(){i.dispatchEvent(o),n=!1}))})}("resize","optimizedResize"))})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(5);function o(t,e,i){function n(n){i&&!i(t,e)||n.stopImmediatePropagation()}return t.addEventListener(e,n),n}function r(t,e,i,n){function o(t){i[e]=t}n&&o(t[e]),Object.defineProperty(t,e,{get:function(){return i[e]},set:o})}function s(t,e,i){i.addEventListener(e,function(){return t.dispatchEvent(new Event(e))})}function a(t,e){Promise.resolve().then(function(){t.dispatchEvent(new Event(e))})}var c="object"==typeof document&&"object-fit"in document.head.style&&!matchMedia("(-webkit-video-playable-inline)").matches,d="bfred-it:iphone-inline-video",u="bfred-it:iphone-inline-video:event",l="bfred-it:iphone-inline-video:nativeplay",f="bfred-it:iphone-inline-video:nativepause";var p,h=[],b=0;function v(t,e,i){(p||0)+200<Date.now()&&(t[u]=!0,p=Date.now()),i||(t.currentTime=e),h[++b%3]=100*e|0}function g(t){return t.driver.currentTime>=t.video.duration}function m(){var t=this[d];this.webkitDisplayingFullscreen?this[l]():("data:"!==t.driver.src&&t.driver.src!==this.src&&(v(this,0,!0),t.driver.src=this.src),this.paused&&(t.paused=!1,0===this.buffered.length&&this.load(),t.driver.play(),t.updater.start(),t.hasAudio||(a(this,"play"),t.video.readyState>=t.video.HAVE_ENOUGH_DATA&&a(this,"playing"))))}function y(t){var e=this[d];e.driver.pause(),e.updater.stop(),this.webkitDisplayingFullscreen&&this[f](),e.paused&&!t||(e.paused=!0,e.hasAudio||a(this,"pause"),this.ended&&!this.webkitDisplayingFullscreen&&(this[u]=!0,a(this,"ended")))}function j(t,e){var i={};t[d]=i,i.paused=!0,i.hasAudio=e,i.video=t,i.updater=Object(n.a)(function(t){this.video.readyState>=this.video.HAVE_FUTURE_DATA?(this.hasAudio||(this.driver.currentTime=this.video.currentTime+t*this.video.playbackRate/1e3,this.video.loop&&g(this)&&(this.driver.currentTime=0)),v(this.video,this.driver.currentTime)):this.video.networkState===this.video.NETWORK_IDLE&&0===this.video.buffered.length&&this.video.load(),this.video.ended&&(delete this.video[u],this.video.pause(!0))}.bind(i)),e?i.driver=function(t){var e=new Audio;return s(t,"play",e),s(t,"playing",e),s(t,"pause",e),e.crossOrigin=t.crossOrigin,e.src=t.src||t.currentSrc||"data:",e}(t):(t.addEventListener("canplay",function(){t.paused||a(t,"playing")}),i.driver={src:t.src||t.currentSrc||"data:",muted:!0,paused:!0,pause:function(){i.driver.paused=!0},play:function(){i.driver.paused=!1,g(i)&&v(t,0)},get ended(){return g(i)}}),t.addEventListener("emptied",function(){var n=!i.driver.src||"data:"===i.driver.src;i.driver.src&&i.driver.src!==t.src&&(v(t,0,!0),i.driver.src=t.src,n||!e&&t.autoplay?i.driver.play():i.updater.stop())},!1),t.addEventListener("webkitbeginfullscreen",function(){t.paused?e&&0===i.driver.buffered.length&&i.driver.load():(t.pause(),t[l]())}),e&&(t.addEventListener("webkitendfullscreen",function(){i.driver.currentTime=t.currentTime}),t.addEventListener("seeking",function(){h.indexOf(100*t.currentTime|0)<0&&(i.driver.currentTime=t.currentTime)}))}function w(t){var e=t[u];return delete t[u],!t.webkitDisplayingFullscreen&&!e}e.default=function(t,e){if(void 0===e&&(e={}),!t[d]){if(!e.everywhere){if(!c)return;if(!(e.iPad||e.ipad?/iPhone|iPod|iPad/:/iPhone|iPod/).test(navigator.userAgent))return}t.pause();var i=t.autoplay;t.autoplay=!1,j(t,!t.muted),function(t){var e=t[d];t[l]=t.play,t[f]=t.pause,t.play=m,t.pause=y,r(t,"paused",e.driver),r(t,"muted",e.driver,!0),r(t,"playbackRate",e.driver,!0),r(t,"ended",e.driver),r(t,"loop",e.driver,!0),o(t,"seeking",function(t){return!t.webkitDisplayingFullscreen}),o(t,"seeked",function(t){return!t.webkitDisplayingFullscreen}),o(t,"timeupdate",w),o(t,"ended",w)}(t),t.classList.add("IIV"),t.muted&&i&&(t.play(),t.addEventListener("playing",function e(){t.autoplay=!0,t.removeEventListener("playing",e)})),/iPhone|iPod|iPad/.test(navigator.platform)||console.warn("iphone-inline-video is not guaranteed to work in emulated environments")}}},function(t,e,i){"use strict";function n(t,e,i,n){var o,r;function s(i){o=e(s,n),t(i-(r||i)),r=i}return{start:function(){o||s(0)},stop:function(){i(o),o=null,r=0}}}function o(t){return n(t,requestAnimationFrame,cancelAnimationFrame)}i.d(e,"a",function(){return o})}])});
//# sourceMappingURL=main.min.js.map