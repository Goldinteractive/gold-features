!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("js-base")):"function"==typeof define&&define.amd?define("feature-object-fit",["js-base"],t):"object"==typeof exports?exports["feature-object-fit"]=t(require("js-base")):e["feature-object-fit"]=t(e["js-base"])}(window,function(e){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},i.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=4)}([function(e,t,i){"use strict";
/*! npm.im/intervalometer */
function n(e,t,i,n){var o,r;function s(i){o=t(s,n),e(i-(r||i)),r=i}return{start:function(){o||s(0)},stop:function(){i(o),o=null,r=0}}}
/*! npm.im/iphone-inline-video 2.2.2 */
function o(e,t,i){function n(n){i&&!i(e,t)||n.stopImmediatePropagation()}return e.addEventListener(t,n),n}function r(e,t,i,n){function o(e){i[t]=e}n&&o(e[t]),Object.defineProperty(e,t,{get:function(){return i[t]},set:o})}function s(e,t,i){i.addEventListener(t,function(){return e.dispatchEvent(new Event(t))})}function a(e,t){Promise.resolve().then(function(){e.dispatchEvent(new Event(t))})}i.r(t);var c="object"==typeof document&&"object-fit"in document.head.style&&!matchMedia("(-webkit-video-playable-inline)").matches,d="bfred-it:iphone-inline-video",u="bfred-it:iphone-inline-video:event",l="bfred-it:iphone-inline-video:nativeplay",f="bfred-it:iphone-inline-video:nativepause";var p,h=[],b=0;function v(e,t,i){(p||0)+200<Date.now()&&(e[u]=!0,p=Date.now()),i||(e.currentTime=t),h[++b%3]=100*t|0}function g(e){return e.driver.currentTime>=e.video.duration}function m(){var e=this[d];this.webkitDisplayingFullscreen?this[l]():("data:"!==e.driver.src&&e.driver.src!==this.src&&(v(this,0,!0),e.driver.src=this.src),this.paused&&(e.paused=!1,0===this.buffered.length&&this.load(),e.driver.play(),e.updater.start(),e.hasAudio||(a(this,"play"),e.video.readyState>=e.video.HAVE_ENOUGH_DATA&&a(this,"playing"))))}function y(e){var t=this[d];t.driver.pause(),t.updater.stop(),this.webkitDisplayingFullscreen&&this[f](),t.paused&&!e||(t.paused=!0,t.hasAudio||a(this,"pause"),this.ended&&!this.webkitDisplayingFullscreen&&(this[u]=!0,a(this,"ended")))}function j(e,t){var i={};e[d]=i,i.paused=!0,i.hasAudio=t,i.video=e,i.updater=n(function(e){this.video.readyState>=this.video.HAVE_FUTURE_DATA?(this.hasAudio||(this.driver.currentTime=this.video.currentTime+e*this.video.playbackRate/1e3,this.video.loop&&g(this)&&(this.driver.currentTime=0)),v(this.video,this.driver.currentTime)):this.video.networkState===this.video.NETWORK_IDLE&&0===this.video.buffered.length&&this.video.load(),this.video.ended&&(delete this.video[u],this.video.pause(!0))}.bind(i),requestAnimationFrame,cancelAnimationFrame),t?i.driver=function(e){var t=new Audio;return s(e,"play",t),s(e,"playing",t),s(e,"pause",t),t.crossOrigin=e.crossOrigin,t.src=e.src||e.currentSrc||"data:",t}(e):(e.addEventListener("canplay",function(){e.paused||a(e,"playing")}),i.driver={src:e.src||e.currentSrc||"data:",muted:!0,paused:!0,pause:function(){i.driver.paused=!0},play:function(){i.driver.paused=!1,g(i)&&v(e,0)},get ended(){return g(i)}}),e.addEventListener("emptied",function(){var n=!i.driver.src||"data:"===i.driver.src;i.driver.src&&i.driver.src!==e.src&&(v(e,0,!0),i.driver.src=e.src,n||!t&&e.autoplay?i.driver.play():i.updater.stop())},!1),e.addEventListener("webkitbeginfullscreen",function(){e.paused?t&&0===i.driver.buffered.length&&i.driver.load():(e.pause(),e[l]())}),t&&(e.addEventListener("webkitendfullscreen",function(){i.driver.currentTime=e.currentTime}),e.addEventListener("seeking",function(){h.indexOf(100*e.currentTime|0)<0&&(i.driver.currentTime=e.currentTime)}))}function w(e){var t=e[u];return delete e[u],!e.webkitDisplayingFullscreen&&!t}t.default=function(e,t){if(void 0===t&&(t={}),!e[d]){if(!t.everywhere){if(!c)return;if(!(t.iPad||t.ipad?/iPhone|iPod|iPad/:/iPhone|iPod/).test(navigator.userAgent))return}e.pause();var i=e.autoplay;e.autoplay=!1,j(e,!e.muted),function(e){var t=e[d];e[l]=e.play,e[f]=e.pause,e.play=m,e.pause=y,r(e,"paused",t.driver),r(e,"muted",t.driver,!0),r(e,"playbackRate",t.driver,!0),r(e,"ended",t.driver),r(e,"loop",t.driver,!0),o(e,"seeking",function(e){return!e.webkitDisplayingFullscreen}),o(e,"seeked",function(e){return!e.webkitDisplayingFullscreen}),o(e,"timeupdate",w),o(e,"ended",w)}(e),e.classList.add("IIV"),e.muted&&i&&(e.play(),e.addEventListener("playing",function t(){e.autoplay=!0,e.removeEventListener("playing",t)})),/iPhone|iPod|iPad/.test(navigator.platform)||console.warn("iphone-inline-video is not guaranteed to work in emulated environments")}}},function(e,t){void 0!==e&&void 0!==e.exports&&(e.exports=function(e){"use strict";var t=navigator.userAgent.indexOf("Edge/")>=0,i=new Image,n="object-fit"in i.style&&!t,o="object-position"in i.style&&!t,r=/(object-fit|object-position)\s*:\s*([-\w\s%]+)/g;function s(e){for(var t=getComputedStyle(e).fontFamily,i=null,n={};null!==(i=r.exec(t));)n[i[1]]=i[2];return n["object-position"]?function(e){return~e["object-position"].indexOf("left")?e["object-position-x"]="left":~e["object-position"].indexOf("right")?e["object-position-x"]="right":e["object-position-x"]="center",~e["object-position"].indexOf("top")?e["object-position-y"]="top":~e["object-position"].indexOf("bottom")?e["object-position-y"]="bottom":e["object-position-y"]="center",e}(n):n}function a(e,t){if("fill"!==t["object-fit"]){var i=e.style,n=window.getComputedStyle(e),o=document.createElement("object-fit");o.appendChild(e.parentNode.replaceChild(o,e));var r={height:"100%",width:"100%",boxSizing:"content-box",display:"inline-block",overflow:"hidden"};for(var s in"backgroundColor backgroundImage borderColor borderStyle borderWidth bottom fontSize lineHeight left opacity margin position right top visibility".replace(/\w+/g,function(e){r[e]=n[e]}),r)o.style[s]=r[s];i.border=i.margin=i.padding=0,i.display="block",i.opacity=1,e.addEventListener("loadedmetadata",a),window.addEventListener("optimizedResize",a),e.readyState>=1&&(e.removeEventListener("loadedmetadata",a),a())}function a(){var n=e.videoWidth/e.videoHeight,r=o.clientWidth,s=o.clientHeight,a=r/s,c=0,d=0;i.marginLeft=i.marginTop=0,(n<a?"contain"===t["object-fit"]:"cover"===t["object-fit"])?(c=s*n,d=r/n,i.width=Math.round(c)+"px",i.height=s+"px","left"===t["object-position-x"]?i.marginLeft=0:"right"===t["object-position-x"]?i.marginLeft=Math.round(r-c)+"px":i.marginLeft=Math.round((r-c)/2)+"px"):(d=r/n,i.width=r+"px",i.height=Math.round(d)+"px","top"===t["object-position-y"]?i.marginTop=0:"bottom"===t["object-position-y"]?i.marginTop=Math.round(s-d)+"px":i.marginTop=Math.round((s-d)/2)+"px"),e.autoplay&&e.play()}}n&&o||(function(e){var t=-1;e?"length"in e||(e=[e]):e=document.querySelectorAll("video");for(;e[++t];){var i=s(e[t]);(i["object-fit"]||i["object-position"])&&(i["object-fit"]=i["object-fit"]||"fill",a(e[t],i))}}(e),function(e,t,i){i=i||window;var n=!1,o=null;try{o=new CustomEvent(t)}catch(e){(o=document.createEvent("Event")).initEvent(t,!0,!0)}i.addEventListener(e,function(){n||(n=!0,requestAnimationFrame(function(){i.dispatchEvent(o),n=!1}))})}("resize","optimizedResize"))})},function(e,t,i){"use strict";
/*! npm.im/object-fit-images 3.2.3 */var n="bfred-it:object-fit-images",o=/(object-fit|object-position)\s*:\s*([-\w\s%]+)/g,r="undefined"==typeof Image?{style:{"object-position":1}}:new Image,s="object-fit"in r.style,a="object-position"in r.style,c="background-size"in r.style,d="string"==typeof r.currentSrc,u=r.getAttribute,l=r.setAttribute,f=!1;function p(e,t,i){var n="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='"+(t||1)+"' height='"+(i||0)+"'%3E%3C/svg%3E";u.call(e,"src")!==n&&l.call(e,"src",n)}function h(e,t){e.naturalWidth?t(e):setTimeout(h,100,e,t)}function b(e){var t=function(e){for(var t,i=getComputedStyle(e).fontFamily,n={};null!==(t=o.exec(i));)n[t[1]]=t[2];return n}(e),i=e[n];if(t["object-fit"]=t["object-fit"]||"fill",!i.img){if("fill"===t["object-fit"])return;if(!i.skipTest&&s&&!t["object-position"])return}if(!i.img){i.img=new Image(e.width,e.height),i.img.srcset=u.call(e,"data-ofi-srcset")||e.srcset,i.img.src=u.call(e,"data-ofi-src")||e.src,l.call(e,"data-ofi-src",e.src),e.srcset&&l.call(e,"data-ofi-srcset",e.srcset),p(e,e.naturalWidth||e.width,e.naturalHeight||e.height),e.srcset&&(e.srcset="");try{!function(e){var t={get:function(t){return e[n].img[t||"src"]},set:function(t,i){return e[n].img[i||"src"]=t,l.call(e,"data-ofi-"+i,t),b(e),t}};Object.defineProperty(e,"src",t),Object.defineProperty(e,"currentSrc",{get:function(){return t.get("currentSrc")}}),Object.defineProperty(e,"srcset",{get:function(){return t.get("srcset")},set:function(e){return t.set(e,"srcset")}})}(e)}catch(e){window.console&&console.warn("https://bit.ly/ofi-old-browser")}}!function(e){if(e.srcset&&!d&&window.picturefill){var t=window.picturefill._;e[t.ns]&&e[t.ns].evaled||t.fillImg(e,{reselect:!0}),e[t.ns].curSrc||(e[t.ns].supported=!1,t.fillImg(e,{reselect:!0})),e.currentSrc=e[t.ns].curSrc||e.src}}(i.img),e.style.backgroundImage='url("'+(i.img.currentSrc||i.img.src).replace(/"/g,'\\"')+'")',e.style.backgroundPosition=t["object-position"]||"center",e.style.backgroundRepeat="no-repeat",e.style.backgroundOrigin="content-box",/scale-down/.test(t["object-fit"])?h(i.img,function(){i.img.naturalWidth>e.width||i.img.naturalHeight>e.height?e.style.backgroundSize="contain":e.style.backgroundSize="auto"}):e.style.backgroundSize=t["object-fit"].replace("none","auto").replace("fill","100% 100%"),h(i.img,function(t){p(e,t.naturalWidth,t.naturalHeight)})}function v(e,t){var i=!f&&!e;if(t=t||{},e=e||"img",a&&!t.skipTest||!c)return!1;"img"===e?e=document.getElementsByTagName("img"):"string"==typeof e?e=document.querySelectorAll(e):"length"in e||(e=[e]);for(var o=0;o<e.length;o++)e[o][n]=e[o][n]||{skipTest:t.skipTest},b(e[o]);i&&(document.body.addEventListener("load",function(e){"IMG"===e.target.tagName&&v(e.target,{skipTest:t.skipTest})},!0),f=!0,e="img"),t.watchMQ&&window.addEventListener("resize",v.bind(null,e,{skipTest:t.skipTest}))}v.supportsObjectFit=s,v.supportsObjectPosition=a,function(){function e(e,t){return e[n]&&e[n].img&&("src"===t||"srcset"===t)?e[n].img:e}a||(HTMLImageElement.prototype.getAttribute=function(t){return u.call(e(this,t),t)},HTMLImageElement.prototype.setAttribute=function(t,i){return l.call(e(this,t),t,String(i))})}(),e.exports=v},function(t,i){t.exports=e},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=i(3),r=c(i(2)),s=c(i(1)),a=c(i(0));function c(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.features.Feature),n(t,[{key:"init",value:function(){var e=this;if(this._objectFit=this.node.getAttribute("data-object-fit"),this._objectPosition=this.node.getAttribute("data-object-position"),this._objectFit&&this._objectPosition?(this.node.style.objectFit=this._objectFit,this.node.style.objectPosition=this._objectPosition,this.node.style.fontFamily='"object-fit: '+this._objectFit+"; object-position: "+this._objectPosition+'"'):this._objectFit?(this.node.style.objectFit=this._objectFit,this.node.style.fontFamily='"object-fit: '+this._objectFit+"; object-position: "+this.options.defaultObjectPosition+'"'):this._objectPosition&&(this.node.style.objectPosition=this._objectPosition,this.node.style.fontFamily='"object-fit: '+this.options.defaultObjectFit+"; object-position: "+this._objectPosition+'"'),"video"==this.node.nodeName.toLowerCase()){(0,s.default)(this.node),(0,a.default)(this.node,{iPad:this.options.iPad});var t=function(){e._removeInitialHide(),e.removeEventListener(e.node,"loadeddata",n),e.removeEventListener(e.node,"loadedmetadata",n)},i=function(){e.node.autoplay&&e.node.play()},n=function(){e.node.readyState>=e.node.HAVE_CURRENT_DATA?(t(),i()):1===e.node.networkState&&t()};this.node.readyState>=this.node.HAVE_CURRENT_DATA||!this.options.waitForMediaLoaded?(this._removeInitialHide(),i()):(this.addEventListener(this.node,"loadeddata",n),this.addEventListener(this.node,"loadedmetadata",n))}else if((0,r.default)(this.node,{watchMQ:this.options.watchMQ}),this.node.naturalWidth||!this.options.waitForMediaLoaded)this._removeInitialHide();else{this.addEventListener(this.node,"load",function t(){e.removeEventListener(e.node,"load",t),e._removeInitialHide()})}}},{key:"_removeInitialHide",value:function(){var e=this;window.setTimeout(function(){"object-fit"===e.node.parentElement.tagName.toLowerCase()&&(e.node.parentElement.style.visibility="inherit",e.node.parentElement.style.opacity="inherit");var t=e.node.closest(".ft-fit-bg");t&&t.classList.remove(e.options.classInitialHide)},0)}}]),t}();d.defaultOptions={iPad:!0,watchMQ:!1,waitForMediaLoaded:!0,defaultObjectFit:"cover",defaultObjectPosition:"center center",classInitialHide:"-initial-hide"},t.default=d}])});
//# sourceMappingURL=main.min.js.map